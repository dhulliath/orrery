/*! teleport-autocomplete - v0.3.3 | https://github.com/teleport/autocomplete#readme | MIT */
{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/autocomplete-ractive.js","js/autocomplete.js","node_modules/classlist-polyfill/src/index.js","node_modules/core-js/library/fn/array/find.js","node_modules/core-js/library/fn/object/assign.js","node_modules/core-js/library/fn/regexp/escape.js","node_modules/core-js/library/modules/$.a-function.js","node_modules/core-js/library/modules/$.add-to-unscopables.js","node_modules/core-js/library/modules/$.array-methods.js","node_modules/core-js/library/modules/$.array-species-create.js","node_modules/core-js/library/modules/$.cof.js","node_modules/core-js/library/modules/$.core.js","node_modules/core-js/library/modules/$.ctx.js","node_modules/core-js/library/modules/$.defined.js","node_modules/core-js/library/modules/$.export.js","node_modules/core-js/library/modules/$.fails.js","node_modules/core-js/library/modules/$.global.js","node_modules/core-js/library/modules/$.iobject.js","node_modules/core-js/library/modules/$.is-array.js","node_modules/core-js/library/modules/$.is-object.js","node_modules/core-js/library/modules/$.js","node_modules/core-js/library/modules/$.object-assign.js","node_modules/core-js/library/modules/$.replacer.js","node_modules/core-js/library/modules/$.shared.js","node_modules/core-js/library/modules/$.to-integer.js","node_modules/core-js/library/modules/$.to-length.js","node_modules/core-js/library/modules/$.to-object.js","node_modules/core-js/library/modules/$.uid.js","node_modules/core-js/library/modules/$.wks.js","node_modules/core-js/library/modules/es6.array.find.js","node_modules/core-js/library/modules/es6.object.assign.js","node_modules/core-js/library/modules/es7.regexp.escape.js","node_modules/debounce/index.js","node_modules/element-closest/closest.js","node_modules/halfred/halfred.js","node_modules/halfred/lib/immutable_stack.js","node_modules/halfred/lib/parser.js","node_modules/halfred/lib/resource.js","node_modules/minivents/dist/minivents.commonjs.min.js","templates/autocomplete.rac"],"names":[],"mappings":"AAAA;;;;;;;;;;;2CCEmB,kCAAkC;;;;4BAE5B,gBAAgB;;;;wCACR,+BAA+B;;;;qBAEjD,OAAO,CAAC,MAAM,CAAC;AAC5B,UAAQ,uCAAsB;;AAE9B,MAAI,EAAE;AACJ,SAAK,EAAE,EAAE;GACV;;AAED,UAAQ,EAAA,oBAAG;;;eAC6D,IAAI,CAAC,GAAG,EAAE;;QAAxE,QAAQ,QAAR,QAAQ;QAAE,OAAO,QAAP,OAAO;QAAE,SAAS,QAAT,SAAS;QAAE,YAAY,QAAZ,YAAY;QAAE,MAAM,QAAN,MAAM;QAAE,KAAK,QAAL,KAAK;;AAEjE,QAAI,CAAC,EAAE,GAAG,8BAAiB,8CAAO,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE;AAC5D,cAAQ,EAAR,QAAQ,EAAE,OAAO,EAAP,OAAO,EAAE,SAAS,EAAT,SAAS,EAAE,YAAY,EAAZ,YAAY,EAAE,MAAM,EAAN,MAAM,EAAE,KAAK,EAAL,KAAK;KAC1D,CAAC,CAAC,CAAC;;AAEJ,QAAI,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAA,GAAG;aAAI,MAAK,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC;KAAA,CAAC,CAAC;AACpD,QAAI,CAAC,EAAE,CAAC,EAAE,CAAC,aAAa,EAAE,UAAA,KAAK;aAAI,MAAK,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC;KAAA,CAAC,CAAC;GAC9D;;AAED,YAAU,EAAA,sBAAG;AACX,QAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;GACnB;CACF,CAAC;;;;;;;;;;;;;;;;QC5BK,oBAAoB;;QACpB,iBAAiB;;uBAEJ,SAAS;;;;yBACV,WAAW;;;;2CAEX,kCAAkC;;;;wCACpC,+BAA+B;;;;2CACvB,kCAAkC;;;;wBACtC,UAAU;;;;AAE/B,IAAM,GAAG,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;AAC7D,IAAM,kBAAkB,GAAG,kEAAkE,CAAC;AAC9F,IAAM,WAAW,GAAG,cAAc,CAAC;AACnC,IAAM,mBAAmB,GAAG,SAAtB,mBAAmB,CAAG,IAAI;sCAA+B,IAAI;CAAO,CAAC;AAC3E,IAAM,mBAAmB,GAAG,oDAAoD,CAAC;AACjF,IAAM,kBAAkB,GAAG,mEAAmE,CAAC;;;AAG/F,IAAM,aAAa,GAAG,SAAS,UAAU,CAAC,IAAI,EAAE;AAC9C,SAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;CACrC,CAAC;;;AAGF,WAAW,CAAC,SAAS,CAAC,EAAE,GAAG,WAAW,CAAC,SAAS,CAAC,gBAAgB,CAAC;AAClE,WAAW,CAAC,SAAS,CAAC,GAAG,GAAG,WAAW,CAAC,SAAS,CAAC,mBAAmB,CAAC;;;;;;IAMhE,oBAAoB;eAApB,oBAAoB;;SACf,eAAG;AAAE,aAAO,IAAI,CAAC,MAAM,CAAC;KAAE;SAC1B,aAAC,KAAK,EAAE;AACf,UAAI,KAAK,KAAK,IAAI,CAAC,MAAM,EAAE,OAAO,KAAK,CAAC;;AAExC,UAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,UAAI,CAAC,EAAE,CAAC,KAAK,GAAG,KAAK,CAAC;AACtB,UAAI,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;KACjC;;;SAEc,eAAG;AAAE,aAAO,IAAI,CAAC,YAAY,CAAC;KAAE;SAChC,aAAC,KAAK,EAAE;;AAErB,UAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACxD,UAAI,OAAO,EAAE,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;;AAEnD,UAAI,CAAC,YAAY,GAAG,KAAK,CAAC;;;AAG1B,UAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAC/C,UAAI,UAAU,EAAE,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;KACvD;;;;;SAGU,aAAC,MAAM,EAAE;AAClB,UAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;KACpD;;;;;;;AAMU,WAhCP,oBAAoB,GAoChB;;;qEAAJ,EAAE;;uBAHJ,EAAE;QAAF,EAAE,2BAAG,IAAI;QAAE,KAAK,QAAL,KAAK;6BAAE,QAAQ;QAAR,QAAQ,iCAAG,EAAE;iCAAE,YAAY;QAAZ,YAAY,qCAAG,aAAa;8BAC7D,SAAS;QAAT,SAAS,kCAAG,IAAI;4BAAE,OAAO;QAAP,OAAO,gCAAG,8BAA8B;+BAAE,UAAU;QAAV,UAAU,mCAAG,CAAC;2BAC1E,MAAM;QAAN,MAAM,+BAAG,gFAAgF;;0BAnCvF,oBAAoB;;AAqCtB,gCAAO,IAAI,CAAC,CAAC;;AAEb,QAAM,IAAI,GAAG,AAAC,OAAO,EAAE,KAAK,QAAQ,GAAI,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AACxE,QAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;;AAEtB,kDAAO,IAAI,EAAE;AACX,cAAQ,EAAR,QAAQ,EAAE,SAAS,EAAT,SAAS,EAAE,OAAO,EAAP,OAAO,EAAE,UAAU,EAAV,UAAU,EAAE,YAAY,EAAZ,YAAY,EAAE,MAAM,EAAN,MAAM,EAAE,OAAO,EAAE,EAAE;AAC3E,kBAAY,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,EAAL,KAAK;KAC1D,CAAC,CAAC;;;AAGH,QAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;AAClC,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;KAC/B,MAAM,IAAI,IAAI,CAAC,KAAK,EAAE;AACrB,UAAI,CAAC,YAAY,CAAC,YAAM;AACtB,cAAK,KAAK,GAAG,MAAK,gBAAgB,CAAC,MAAK,KAAK,CAAC,CAAC;AAC/C,cAAK,IAAI,CAAC,QAAQ,EAAE,MAAK,KAAK,CAAC,CAAC;OACjC,CAAC,CAAC;KACJ;;AAED,QAAI,CAAC,SAAS,GAAG,2BAAS,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;AAC/C,WAAO,IAAI,CAAC;GACb;;;;;;eA3DG,oBAAoB;;;;;;WAyEjB,mBAAG;AACR,UAAI,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AACnC,UAAI,CAAC,EAAE,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AACvC,UAAI,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AACnC,UAAI,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AACjC,UAAI,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEnC,UAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;;AAEtC,UAAM,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;AAClD,qBAAe,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;KACvF;;;;;;;WAMI,iBAAG;AACN,UAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,UAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;KACvB;;;;;;;WAMS,oBAAC,EAAE,EAAE;AACb,UAAI,CAAC,EAAE,IAAI,EAAE,EAAE,YAAY,gBAAgB,CAAA,AAAC,EAAE,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;;AAEvF,QAAE,CAAC,kBAAkB,CAAC,aAAa,EAAE,kBAAkB,CAAC,CAAC;AACzD,YAAM,CAAC,cAAc,CAAC,IAAI,EAAE,WAAW,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,eAAe,EAAE,CAAC,CAAC;AACxE,YAAM,CAAC,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,CAAC;;AAE1E,UAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AACpF,WAAK,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;;AAEjC,YAAM,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;;AAEtE,UAAI,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC7C,UAAI,CAAC,EAAE,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACjD,UAAI,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC7C,UAAI,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC3C,UAAI,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;AAE7C,UAAI,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KACxD;;;;;;;;;WAOU,qBAAC,KAAK,EAAE;AACjB,UAAM,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;AACxF,UAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;KAC3B;;;;;WAGM,mBAAG;AAAE,UAAI,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC;KAAE;;;;;WAGxB,mBAAG;AAAE,UAAI,CAAC,UAAU,EAAE,CAAC;KAAE;;;;;WAG1B,kBAAG;AAAE,UAAI,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;KAAE;;;;;WAG/B,mBAAG;;;AACR,UAAI,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;AAC5B,UAAI,CAAC,YAAY,CAAC;eAAM,OAAK,UAAU,EAAE;OAAA,CAAC,CAAC;KAC5C;;;;;WAGQ,mBAAC,KAAK,EAAE;AACf,UAAM,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC;;;AAG3B,UAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,cAAc,EAAE,CAAC;;AAEpE,cAAQ,IAAI;AACZ,aAAK,GAAG,CAAC,IAAI;;AAEX,cAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACxD,gBAAM;AAAA,AACR,aAAK,GAAG,CAAC,KAAK;;AAEZ,cAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,cAAc,EAAE,CAAC;AACtD,cAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AACrC,gBAAM;AAAA,AACR,aAAK,GAAG,CAAC,GAAG;AAAE,cAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAClE,gBAAM;AAAA,AACR,aAAK,GAAG,CAAC,EAAE;AAAE,cAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;AAChE,gBAAM;AAAA,AACR,aAAK,GAAG,CAAC,IAAI;AAAE,cAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;AACxF,gBAAM;AAAA,OACP;KACF;;;;;;;;;WAOY,uBAAC,KAAK,EAAE;AACnB,UAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AACzB,UAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;AAC5B,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;;AAEzC,UAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACjG,UAAI,WAAW,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC;;AAExC,UAAI,QAAQ,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;;AAE7E,UAAI,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACzB,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;KACjD;;;;;;;WAMU,uBAAW;UAAV,GAAG,yDAAG,EAAE;;AAClB,UAAI,GAAG,GAAG,GAAG,CAAC;;AAEd,UAAI,CAAC,KAAK,CACP,KAAK,CAAC,SAAS,CAAC,CAChB,MAAM,CAAC,UAAA,EAAE;eAAI,CAAC,CAAC,EAAE;OAAA,CAAC,CAClB,OAAO,CAAC,UAAA,KAAK,EAAI;AAChB,YAAM,OAAO,GAAG,IAAI,MAAM,CAAC,8CAAa,KAAK,CAAC,GAAG,sBAAsB,EAAE,IAAI,CAAC,CAAC;AAC/E,WAAG,GAAG,GAAG,CAAC,OAAO,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;OAC/C,CAAC,CAAC;;AAEL,aAAO,GAAG,CAAC;KACZ;;;;;;;WAMS,sBAAsC;;;wEAAJ,EAAE;;kCAAjC,SAAS;UAAT,SAAS,mCAAG,IAAI,CAAC,SAAS;;AACrC,UAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,GAAG;eAChC,mBAAmB,CAAC,OAAK,YAAY,CAAC,GAAG,CAAC,CAAC;OAAA,CAAC,CAC3C,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;AAEpC,UAAI,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,GAAG,mBAAmB,CAAC;AAChF,UAAI,IAAI,CAAC,KAAK,KAAK,EAAE,IAAI,SAAS,EAAE,OAAO,GAAG,kBAAkB,CAAC;AACjE,UAAI,CAAC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC;;AAE9B,UAAI,CAAC,WAAW,GAAG,CAAC,CAAC;KACtB;;;;;;;WAMe,0BAAC,KAAK,EAAE;AACtB,UAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,KAAK,EAAE,OAAO,IAAI,CAAC;AACzC,aAAO,2CAAK,IAAI,CAAC,OAAO,EAAE,UAAA,GAAG;eAAI,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;OAAA,CAAC,CAAC;KACnE;;;;;;;WAMW,wBAA0B;;;UAAzB,EAAE,yDAAG,SAAS,IAAI,GAAG,EAAE;;;AAElC,UAAI,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;;AAE/B,UAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACvC,UAAI,MAAM,EAAE;AACV,YAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,eAAO,EAAE,EAAE,CAAC;OACb;;AAED,UAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,UAAA,OAAO,EAAI;AACnC,eAAK,OAAO,GAAG,OAAK,MAAM,CAAC,OAAK,KAAK,CAAC,GAAG,OAAO,CAAC;AACjD,UAAE,EAAE,CAAC;AACL,eAAK,OAAO,GAAG,KAAK,CAAC;OACtB,CAAC,CAAC;;AAEH,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACrB;;;;;;;WAMc,2BAAG;;;AAChB,UAAM,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;AACjC,UAAM,KAAK,uDAAoD,IAAI,CAAC,MAAM,SAAO,IAAI,CAAC,MAAM,SAAM,EAAE,CAAA,AAAE,CAAC;;AAEvG,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,UAAI,CAAC,cAAc,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC;AAC1C,UAAI,CAAC,EAAE,CAAC,WAAW,GAAG,uBAAuB,CAAC;;AAE9C,eAAS,CAAC,WAAW,CAAC,kBAAkB,CAAC,UAAC,KAAU,EAAK;YAAb,MAAM,GAAR,KAAU,CAAR,MAAM;;AAChD,WAAG,CAAC,IAAI,CAAC,KAAK,EAAK,OAAK,OAAO,mBAAc,MAAM,CAAC,QAAQ,SAAI,MAAM,CAAC,SAAS,gBAAW,KAAK,CAAG,CAAC;AACpG,WAAG,CAAC,gBAAgB,CAAC,QAAQ,iCAA+B,OAAK,UAAU,WAAQ,CAAC;AACpF,WAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE;iBAAM,OAAK,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SAAA,CAAC,CAAC;AACjF,WAAG,CAAC,IAAI,EAAE,CAAC;OACZ,EAAE,UAAC,KAAW,EAAK;YAAd,OAAO,GAAT,KAAW,CAAT,OAAO;;AACX,eAAK,OAAO,GAAG,KAAK,CAAC;AACrB,eAAK,EAAE,CAAC,WAAW,GAAG,OAAO,CAAC;AAC9B,kBAAU,CAAC;iBAAM,OAAK,EAAE,CAAC,WAAW,GAAG,OAAK,cAAc;SAAA,EAAE,IAAI,CAAC,CAAC;OACnE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;KACvB;;;;;;;WAMY,uBAAC,IAAI,EAAE;AAClB,UAAM,GAAG,GAAG,qBAAQ,KAAK,CAAC,IAAI,CAAC,CAAC;AAChC,UAAM,OAAO,GAAG,GAAG,CAAC,aAAa,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE,UAAI,OAAO,EAAE;AACX,YAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;AACzC,YAAI,IAAI,CAAC,SAAS,KAAK,QAAQ,EAAE;AAC/B,cAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;AAChB,cAAI,CAAC,UAAU,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;SACvC,MAAM;AACL,cAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;SACvB;OACF;AACD,UAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,UAAI,CAAC,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC;KAC3C;;;;;;;WAMQ,mBAAC,EAAE,EAAE;;;AACZ,UAAI,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;AAC/B,UAAM,KAAK,uCAAoC,IAAI,CAAC,MAAM,SAAO,IAAI,CAAC,MAAM,SAAM,EAAE,CAAA,AAAE,CAAC;;AAEvF,UAAM,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;AACjC,UAAM,KAAK,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC7C,SAAG,CAAC,IAAI,CAAC,KAAK,EAAK,IAAI,CAAC,OAAO,wBAAmB,KAAK,eAAU,KAAK,eAAU,IAAI,CAAC,QAAQ,CAAG,CAAC;AACjG,SAAG,CAAC,gBAAgB,CAAC,QAAQ,iCAA+B,IAAI,CAAC,UAAU,WAAQ,CAAC;AACpF,SAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAM;AACjC,YAAM,OAAO,GAAG,qBAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CACpD,aAAa,CAAC,qBAAqB,CAAC,CACpC,GAAG,CAAC,UAAA,GAAG;iBAAI,OAAK,SAAS,CAAC,GAAG,CAAC;SAAA,CAAC,CAAC;;AAEnC,UAAE,CAAC,OAAO,CAAC,CAAC;OACb,CAAC,CAAC;AACH,SAAG,CAAC,IAAI,EAAE,CAAC;;AAEX,aAAO,GAAG,CAAC;KACZ;;;;;;;WAMQ,mBAAC,GAAG,EAAE;AACb,UAAM,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAChF,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;AAC7C,UAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;AAC7D,UAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;AAC/C,UAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;;UAEhC,QAAQ,GACyB,IAAI,CADhD,SAAS;UAAY,IAAI,GACmB,IAAI,CAD3B,IAAI;UAAc,SAAS,GACJ,IAAI,CADrB,UAAU;UAAa,UAAU,GAChB,IAAI,CADE,UAAU;kCAChB,IAAI,CAAtD,QAAQ,CAAI,MAAM;UAAI,QAAQ,yBAAR,QAAQ;UAAE,SAAS,yBAAT,SAAS;oCAEM,GAAG,CAA5C,kBAAkB;UAAE,KAAK,2CAAG,QAAQ;;AAE5C,UAAM,MAAM,GAAG,EAAE,KAAK,EAAL,KAAK,EAAE,IAAI,EAAJ,IAAI,EAAE,SAAS,EAAT,SAAS,EAAE,QAAQ,EAAR,QAAQ,EAAE,SAAS,EAAT,SAAS,EAAE,UAAU,EAAV,UAAU,EAAE,CAAC;;AAE3E,UAAI,IAAI,CAAC,OAAO,EAAE,8CAAO,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AACjE,UAAI,IAAI,CAAC,eAAe,EAAE;oCACmD,IAAI,CAAC,eAAe;YAAjF,cAAc,yBAApB,IAAI;YAAwC,kBAAkB,yBAAxC,oBAAoB;;AAClD,sDAAO,MAAM,EAAE,EAAE,cAAc,EAAd,cAAc,EAAE,kBAAkB,EAAlB,kBAAkB,EAAE,CAAC,CAAC;OACxD;;AAED,UAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,YAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;AACvD,sDAAO,MAAM,EAAE,EAAE,eAAe,EAAE,KAAK,CAAC,gBAAgB,EAAE,CAAC,CAAC;OAC7D;;AAED,UAAI,IAAI,CAAC,UAAU,EAAE;+BAC+D,IAAI,CAAC,UAAU;YAAnF,MAAM,oBAAZ,IAAI;YAAgB,MAAM,oBAAZ,IAAI;YAAiB,IAAI,oBAAX,KAAK;YAA2B,SAAS,oBAA5B,iBAAiB;;AAClE,sDAAO,MAAM,EAAE,EAAE,MAAM,EAAN,MAAM,EAAE,IAAI,EAAJ,IAAI,EAAE,SAAS,EAAT,SAAS,EAAE,MAAM,EAAN,MAAM,EAAE,CAAC,CAAC;OACrD;;AAED,aAAO,MAAM,CAAC;KACf;;;WAvSU,cAAC,EAAE,EAAgB;UAAd,OAAO,yDAAG,EAAE;;AAC1B,UAAM,GAAG,GAAG,AAAC,OAAO,EAAE,KAAK,QAAQ,IAAI,EAAE,YAAY,gBAAgB,GAAI,8CAAO,OAAO,EAAE,EAAE,EAAE,EAAF,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;AACtG,aAAO,IAAI,oBAAoB,CAAC,GAAG,CAAC,CAAC;KACtC;;;SAnEG,oBAAoB;;;qBA0WX,oBAAoB;;;;ACzYnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;;ACHA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;;ACJA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/HA;;ACAA","file":"teleport-autocomplete-ractive.js","sourceRoot":"..","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* global Ractive */\r\n\r\nimport assign from 'core-js/library/fn/object/assign';\r\n\r\nimport Autocomplete from './autocomplete';\r\nimport AutocompleteTemplate from '../templates/autocomplete.rac';\r\n\r\nexport default Ractive.extend({\r\n  template: AutocompleteTemplate,\r\n\r\n  data: {\r\n    query: '',\r\n  },\r\n\r\n  onrender() {\r\n    const { maxItems, apiRoot, geoLocate, itemTemplate, embeds, value } = this.get();\r\n\r\n    this.ac = new Autocomplete(assign({ el: this.find('input') }, {\r\n      maxItems, apiRoot, geoLocate, itemTemplate, embeds, value,\r\n    }));\r\n\r\n    this.ac.on('change', val => this.set('value', val));\r\n    this.ac.on('querychange', query => this.set('query', query));\r\n  },\r\n\r\n  onteardown() {\r\n    this.ac.destroy();\r\n  },\r\n});\r\n","import 'classlist-polyfill';\r\nimport 'element-closest';\r\n\r\nimport halfred from 'halfred';\r\nimport events from 'minivents';\r\n\r\nimport assign from 'core-js/library/fn/object/assign';\r\nimport find from 'core-js/library/fn/array/find';\r\nimport escapeRegexp from 'core-js/library/fn/regexp/escape';\r\nimport debounce from 'debounce';\r\n\r\nconst Key = { BACK: 8, TAB: 9, ENTER: 13, UP: 38, DOWN: 40 };\r\nconst CONTAINER_TEMPLATE = '<div class=\"tp-autocomplete\"><ul class=\"tp-ac__list\"></ul></div>';\r\nconst INPUT_CLASS = 'tp-ac__input';\r\nconst itemWrapperTemplate = item => `<li class=\"tp-ac__item\">${item}</li>`;\r\nconst NO_RESULTS_TEMPLATE = '<li class=\"tp-ac__item no-results\">No matches</li>';\r\nconst GEOLOCATE_TEMPLATE = '<li class=\"tp-ac__item geolocate\">Detect my current location</li>';\r\n\r\n// Default item template, wraps title matches\r\nconst ITEM_TEMPLATE = function renderItem(item) {\r\n  return this.wrapMatches(item.title);\r\n};\r\n\r\n// Shorthands\r\nHTMLElement.prototype.on = HTMLElement.prototype.addEventListener;\r\nHTMLElement.prototype.off = HTMLElement.prototype.removeEventListener;\r\n\r\n\r\n/**\r\n * Teleport Cities Autocomplete\r\n */\r\nclass TeleportAutocomplete {\r\n  get query() { return this._query; }\r\n  set query(query) {\r\n    if (query === this._query) return query;\r\n\r\n    this._query = query;\r\n    this.el.value = query;\r\n    this.emit('querychange', query);\r\n  }\r\n\r\n  get activeIndex() { return this._activeIndex; }\r\n  set activeIndex(index) {\r\n    // Remove old highlight\r\n    const oldNode = this.list.childNodes[this._activeIndex];\r\n    if (oldNode) oldNode.classList.remove('is-active');\r\n\r\n    this._activeIndex = index;\r\n\r\n    // Set highlight\r\n    const activeNode = this.list.childNodes[index];\r\n    if (activeNode) activeNode.classList.add('is-active');\r\n  }\r\n\r\n  // Show or hide loading\r\n  set loading(toggle) {\r\n    this.container.classList.toggle('spinner', toggle);\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse arguments and wrap input\r\n   */\r\n  constructor({\r\n    el = null, value, maxItems = 10, itemTemplate = ITEM_TEMPLATE,\r\n    geoLocate = true, apiRoot = 'https://api.teleport.org/api', apiVersion = 1,\r\n    embeds = 'city:country,city:admin1_division,city:timezone/tz:offsets-now,city:urban_area',\r\n  } = {}) {\r\n    events(this);\r\n\r\n    const elem = (typeof el === 'string') ? document.querySelector(el) : el;\r\n    this.setupInput(elem);\r\n\r\n    assign(this, {\r\n      maxItems, geoLocate, apiRoot, apiVersion, itemTemplate, embeds, results: [],\r\n      _activeIndex: 0, _cache: {}, _query: this.el.value, value,\r\n    });\r\n\r\n    // Prefetch results\r\n    if (this.value && this.value.title) {\r\n      this.query = this.value.title;\r\n    } else if (this.query) {\r\n      this.fetchResults(() => {\r\n        this.value = this.getResultByTitle(this.query);\r\n        this.emit('change', this.value);\r\n      });\r\n    }\r\n\r\n    this.getCities = debounce(this.getCities, 200);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Init shorthand\r\n   */\r\n  static init(el, options = {}) {\r\n    const opt = (typeof el === 'string' || el instanceof HTMLInputElement) ? assign(options, { el }) : el;\r\n    return new TeleportAutocomplete(opt);\r\n  }\r\n\r\n\r\n  /**\r\n   * Clean up the container\r\n   */\r\n  destroy() {\r\n    this.el.off('input', this.oninput);\r\n    this.el.off('keydown', this.onkeydown);\r\n    this.el.off('focus', this.onfocus);\r\n    this.el.off('blur', this.onblur);\r\n    this.el.off('click', this.onclick);\r\n\r\n    this.el.classList.remove(INPUT_CLASS);\r\n\r\n    const containerParent = this.container.parentNode;\r\n    containerParent.replaceChild(this.el.parentNode.removeChild(this.el), this.container);\r\n  }\r\n\r\n\r\n  /**\r\n   * Clear the selected value\r\n   */\r\n  clear() {\r\n    this.results = [];\r\n    this.selectByIndex(0);\r\n  }\r\n\r\n\r\n  /**\r\n   * Wrap input node in container\r\n   */\r\n  setupInput(el) {\r\n    if (!el || !(el instanceof HTMLInputElement)) throw new Error('Invalid element given');\r\n\r\n    el.insertAdjacentHTML('beforebegin', CONTAINER_TEMPLATE);\r\n    Object.defineProperty(this, 'container', { value: el.previousSibling });\r\n    Object.defineProperty(this, 'list', { value: this.container.firstChild });\r\n\r\n    const input = this.container.insertBefore(el.parentNode.removeChild(el), this.list);\r\n    input.classList.add(INPUT_CLASS);\r\n\r\n    Object.defineProperty(this, 'el', { enumerable: true, value: input });\r\n\r\n    this.el.on('input', this.oninput.bind(this));\r\n    this.el.on('keydown', this.onkeydown.bind(this));\r\n    this.el.on('focus', this.onfocus.bind(this));\r\n    this.el.on('blur', this.onblur.bind(this));\r\n    this.el.on('click', this.onclick.bind(this));\r\n\r\n    this.list.on('mousedown', this.onlistclick.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Event handlers\r\n   */\r\n\r\n  // Clicked on list item, select item\r\n  onlistclick(event) {\r\n    const index = [].indexOf.call(this.list.children, event.target.closest('.tp-ac__item'));\r\n    this.selectByIndex(index);\r\n  }\r\n\r\n  // Select text on click\r\n  onclick() { this.el.select(); }\r\n\r\n  // Input has focus, open list\r\n  onfocus() { this.renderList(); }\r\n\r\n  // Input lost focus, close list\r\n  onblur() { this.list.innerHTML = ''; }\r\n\r\n  // Input was typed into\r\n  oninput() {\r\n    this._query = this.el.value;\r\n    this.fetchResults(() => this.renderList());\r\n  }\r\n\r\n  // Called on keypresses\r\n  onkeydown(event) {\r\n    const code = event.keyCode;\r\n\r\n    // Prevent cursor move\r\n    if ([Key.UP, Key.DOWN].indexOf(code) !== -1) event.preventDefault();\r\n\r\n    switch (code) {\r\n    case Key.BACK:\r\n      // Clear filled value or last char\r\n      if (this.value || this.query.length === 1) this.clear();\r\n      break;\r\n    case Key.ENTER:\r\n      // Prevent submit if query is to be selected\r\n      if (!this.value && this.query) event.preventDefault();\r\n      this.selectByIndex(this.activeIndex);\r\n      break;\r\n    case Key.TAB: if (!this.value) this.selectByIndex(this.activeIndex);\r\n      break;\r\n    case Key.UP: this.activeIndex = Math.max(0, this.activeIndex - 1);\r\n      break;\r\n    case Key.DOWN: this.activeIndex = Math.min(this.results.length - 1, this.activeIndex + 1);\r\n      break;\r\n    }\r\n  }\r\n  // ---------------------------------------------------------------------------\r\n\r\n\r\n  /**\r\n   * Select option from list by index\r\n   */\r\n  selectByIndex(index) {\r\n    this.activeIndex = index;\r\n    const oldValue = this.value;\r\n    this.value = this.results[index] || null;\r\n\r\n    const isGeolocate = this.list.firstChild && this.list.firstChild.classList.contains('geolocate');\r\n    if (isGeolocate) this.currentLocation();\r\n\r\n    if (oldValue !== this.value && !isGeolocate) this.emit('change', this.value);\r\n\r\n    this.list.innerHTML = '';\r\n    this.query = this.value ? this.value.title : '';\r\n  }\r\n\r\n\r\n  /**\r\n   * Wrap matching result names in <span>s\r\n   */\r\n  wrapMatches(str = '') {\r\n    let res = str;\r\n\r\n    this.query\r\n      .split(/[\\,\\s]+/)\r\n      .filter(qr => !!qr)\r\n      .forEach(query => {\r\n        const matcher = new RegExp(escapeRegexp(query) + '(?![^<]*>|[^<>]*<\\/)', 'gi');\r\n        res = res.replace(matcher, '<span>$&</span>');\r\n      });\r\n\r\n    return res;\r\n  }\r\n\r\n\r\n  /**\r\n   * Render result list\r\n   */\r\n  renderList({ geoLocate = this.geoLocate } = {}) {\r\n    let results = this.results.map(res =>\r\n      itemWrapperTemplate(this.itemTemplate(res)))\r\n      .slice(0, this.maxItems).join('');\r\n\r\n    if (!results && this.query !== '' && !this.value) results = NO_RESULTS_TEMPLATE;\r\n    if (this.query === '' && geoLocate) results = GEOLOCATE_TEMPLATE;\r\n    this.list.innerHTML = results;\r\n\r\n    this.activeIndex = 0;\r\n  }\r\n\r\n\r\n  /**\r\n   * Fetch value from results by title\r\n   */\r\n  getResultByTitle(title) {\r\n    if (!this.results || !title) return null;\r\n    return find(this.results, res => res.title.indexOf(title) !== -1);\r\n  }\r\n\r\n\r\n  /**\r\n   * Fetch picker data from cache or API\r\n   */\r\n  fetchResults(cb = function noop() {}) {\r\n    // Cancel old request\r\n    if (this.req) this.req.abort();\r\n\r\n    const cached = this._cache[this.query];\r\n    if (cached) {\r\n      this.results = cached;\r\n      return cb();\r\n    }\r\n\r\n    this.req = this.getCities(results => {\r\n      this.results = this._cache[this.query] = results;\r\n      cb();\r\n      this.loading = false;\r\n    });\r\n\r\n    this.loading = true;\r\n  }\r\n\r\n\r\n  /**\r\n   * Geolocate current city\r\n   */\r\n  currentLocation() {\r\n    const req = new XMLHttpRequest();\r\n    const embed = `location:nearest-cities/location:nearest-city/${this.embeds ? `{${this.embeds}}` : ''}`;\r\n\r\n    this.loading = true;\r\n    this.oldPlaceholder = this.el.placeholder;\r\n    this.el.placeholder = 'Detecting location...';\r\n\r\n    navigator.geolocation.getCurrentPosition(({ coords }) => {\r\n      req.open('GET', `${this.apiRoot}/locations/${coords.latitude},${coords.longitude}/?embed=${embed}`);\r\n      req.setRequestHeader('Accept', `application/vnd.teleport.v${this.apiVersion}+json`);\r\n      req.addEventListener('load', () => this.parseLocation(JSON.parse(req.response)));\r\n      req.send();\r\n    }, ({ message }) => {\r\n      this.loading = false;\r\n      this.el.placeholder = message;\r\n      setTimeout(() => this.el.placeholder = this.oldPlaceholder, 3000);\r\n    }, { timeout: 5000 });\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse current location API response\r\n   */\r\n  parseLocation(json) {\r\n    const res = halfred.parse(json);\r\n    const nearest = res.embeddedArray('location:nearest-cities')[0];\r\n    if (nearest) {\r\n      this.results = [this.parseCity(nearest)];\r\n      if (this.geoLocate === 'nopick') {\r\n        this.el.focus();\r\n        this.renderList({ geoLocate: false });\r\n      } else {\r\n        this.selectByIndex(0);\r\n      }\r\n    }\r\n    this.loading = false;\r\n    this.el.placeholder = this.oldPlaceholder;\r\n  }\r\n\r\n\r\n  /**\r\n   * Make the API call\r\n   */\r\n  getCities(cb) {\r\n    if (!this.query) return cb([]);\r\n    const embed = `city:search-results/city:item/${this.embeds ? `{${this.embeds}}` : ''}`;\r\n\r\n    const req = new XMLHttpRequest();\r\n    const query = encodeURIComponent(this.query);\r\n    req.open('GET', `${this.apiRoot}/cities/?search=${query}&embed=${embed}&limit=${this.maxItems}`);\r\n    req.setRequestHeader('Accept', `application/vnd.teleport.v${this.apiVersion}+json`);\r\n    req.addEventListener('load', () => {\r\n      const results = halfred.parse(JSON.parse(req.response))\r\n        .embeddedArray('city:search-results')\r\n        .map(res => this.parseCity(res));\r\n\r\n      cb(results);\r\n    });\r\n    req.send();\r\n\r\n    return req;\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse city\r\n   */\r\n  parseCity(res) {\r\n    const city = res.embedded('location:nearest-city') || res.embedded('city:item');\r\n    city.country = city.embedded('city:country');\r\n    city.admin1_division = city.embedded('city:admin1_division');\r\n    city.timezone = city.embedded('city:timezone');\r\n    city.urban_area = city.embedded('city:urban_area');\r\n\r\n    const { full_name: fullName, name, geoname_id: geonameId, population,\r\n      location: { latlon: { latitude, longitude } } } = city;\r\n\r\n    const { matching_full_name: title = fullName } = res;\r\n\r\n    const result = { title, name, geonameId, latitude, longitude, population };\r\n\r\n    if (city.country) assign(result, { country: city.country.name });\r\n    if (city.admin1_division) {\r\n      const { name: admin1Division, geonames_admin1_code: admin1DivisionCode } = city.admin1_division;\r\n      assign(result, { admin1Division, admin1DivisionCode });\r\n    }\r\n\r\n    if (city.timezone) {\r\n      const tzNow = city.timezone.embedded('tz:offsets-now');\r\n      assign(result, { tzOffsetMinutes: tzNow.total_offset_min });\r\n    }\r\n\r\n    if (city.urban_area) {\r\n      const { slug: uaSlug, name: uaName, ua_id: uaId, teleport_city_url: uaCityUrl } = city.urban_area;\r\n      assign(result, { uaName, uaId, uaCityUrl, uaSlug });\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default TeleportAutocomplete;\r\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20170427\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif (\"document\" in window.self) {\n\n// Full polyfill for browsers with no classList support\n// Including IE < Edge missing SVGElement.classList\nif (!(\"classList\" in document.createElement(\"_\")) \n\t|| document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n(function (view) {\n\n\"use strict\";\n\nif (!('Element' in view)) return;\n\nvar\n\t  classListProp = \"classList\"\n\t, protoProp = \"prototype\"\n\t, elemCtrProto = view.Element[protoProp]\n\t, objCtr = Object\n\t, strTrim = String[protoProp].trim || function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, \"\");\n\t}\n\t, arrIndexOf = Array[protoProp].indexOf || function (item) {\n\t\tvar\n\t\t\t  i = 0\n\t\t\t, len = this.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\t// Vendors: please allow content code to instantiate DOMExceptions\n\t, DOMEx = function (type, message) {\n\t\tthis.name = type;\n\t\tthis.code = DOMException[type];\n\t\tthis.message = message;\n\t}\n\t, checkTokenAndGetIndex = function (classList, token) {\n\t\tif (token === \"\") {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"SYNTAX_ERR\"\n\t\t\t\t, \"An invalid or illegal string was specified\"\n\t\t\t);\n\t\t}\n\t\tif (/\\s/.test(token)) {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"INVALID_CHARACTER_ERR\"\n\t\t\t\t, \"String contains an invalid character\"\n\t\t\t);\n\t\t}\n\t\treturn arrIndexOf.call(classList, token);\n\t}\n\t, ClassList = function (elem) {\n\t\tvar\n\t\t\t  trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n\t\t\t, classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n\t\t\t, i = 0\n\t\t\t, len = classes.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tthis.push(classes[i]);\n\t\t}\n\t\tthis._updateClassName = function () {\n\t\t\telem.setAttribute(\"class\", this.toString());\n\t\t};\n\t}\n\t, classListProto = ClassList[protoProp] = []\n\t, classListGetter = function () {\n\t\treturn new ClassList(this);\n\t}\n;\n// Most DOMException implementations don't allow calling DOMException's toString()\n// on non-DOMExceptions. Error's toString() is sufficient here.\nDOMEx[protoProp] = Error[protoProp];\nclassListProto.item = function (i) {\n\treturn this[i] || null;\n};\nclassListProto.contains = function (token) {\n\ttoken += \"\";\n\treturn checkTokenAndGetIndex(this, token) !== -1;\n};\nclassListProto.add = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tif (checkTokenAndGetIndex(this, token) === -1) {\n\t\t\tthis.push(token);\n\t\t\tupdated = true;\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.remove = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t\t, index\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tindex = checkTokenAndGetIndex(this, token);\n\t\twhile (index !== -1) {\n\t\t\tthis.splice(index, 1);\n\t\t\tupdated = true;\n\t\t\tindex = checkTokenAndGetIndex(this, token);\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.toggle = function (token, force) {\n\ttoken += \"\";\n\n\tvar\n\t\t  result = this.contains(token)\n\t\t, method = result ?\n\t\t\tforce !== true && \"remove\"\n\t\t:\n\t\t\tforce !== false && \"add\"\n\t;\n\n\tif (method) {\n\t\tthis[method](token);\n\t}\n\n\tif (force === true || force === false) {\n\t\treturn force;\n\t} else {\n\t\treturn !result;\n\t}\n};\nclassListProto.toString = function () {\n\treturn this.join(\" \");\n};\n\nif (objCtr.defineProperty) {\n\tvar classListPropDesc = {\n\t\t  get: classListGetter\n\t\t, enumerable: true\n\t\t, configurable: true\n\t};\n\ttry {\n\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t} catch (ex) { // IE 8 doesn't support enumerable:true\n\t\t// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n\t\t// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n\t\tif (ex.number === undefined || ex.number === -0x7FF5EC54) {\n\t\t\tclassListPropDesc.enumerable = false;\n\t\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t\t}\n\t}\n} else if (objCtr[protoProp].__defineGetter__) {\n\telemCtrProto.__defineGetter__(classListProp, classListGetter);\n}\n\n}(window.self));\n\n}\n\n// There is full or partial native classList support, so just check if we need\n// to normalize the add/remove and toggle APIs.\n\n(function () {\n\t\"use strict\";\n\n\tvar testElement = document.createElement(\"_\");\n\n\ttestElement.classList.add(\"c1\", \"c2\");\n\n\t// Polyfill for IE 10/11 and Firefox <26, where classList.add and\n\t// classList.remove exist but support only one argument at a time.\n\tif (!testElement.classList.contains(\"c2\")) {\n\t\tvar createMethod = function(method) {\n\t\t\tvar original = DOMTokenList.prototype[method];\n\n\t\t\tDOMTokenList.prototype[method] = function(token) {\n\t\t\t\tvar i, len = arguments.length;\n\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\ttoken = arguments[i];\n\t\t\t\t\toriginal.call(this, token);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tcreateMethod('add');\n\t\tcreateMethod('remove');\n\t}\n\n\ttestElement.classList.toggle(\"c3\", false);\n\n\t// Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n\t// support the second argument.\n\tif (testElement.classList.contains(\"c3\")) {\n\t\tvar _toggle = DOMTokenList.prototype.toggle;\n\n\t\tDOMTokenList.prototype.toggle = function(token, force) {\n\t\t\tif (1 in arguments && !this.contains(token) === !force) {\n\t\t\t\treturn force;\n\t\t\t} else {\n\t\t\t\treturn _toggle.call(this, token);\n\t\t\t}\n\t\t};\n\n\t}\n\n\ttestElement = null;\n}());\n\n}\n","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/$.core').Array.find;","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/$.core').Object.assign;","require('../../modules/es7.regexp.escape');\nmodule.exports = require('../../modules/$.core').RegExp.escape;","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","module.exports = function(){ /* empty */ };","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./$.ctx')\n  , IObject  = require('./$.iobject')\n  , toObject = require('./$.to-object')\n  , toLength = require('./$.to-length')\n  , asc      = require('./$.array-species-create');\nmodule.exports = function(TYPE){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? asc($this, length) : IS_FILTER ? asc($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar isObject = require('./$.is-object')\n  , isArray  = require('./$.is-array')\n  , SPECIES  = require('./$.wks')('species');\nmodule.exports = function(original, length){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length);\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};","// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = require('./$')\n  , toObject = require('./$.to-object')\n  , IObject  = require('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = require('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;","module.exports = function(regExp, replace){\n  var replacer = replace === Object(replace) ? function(part){\n    return replace[part];\n  } : replace;\n  return function(it){\n    return String(it).replace(regExp, replacer);\n  };\n};","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./$.export')\n  , $find   = require('./$.array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./$.add-to-unscopables')(KEY);","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./$.object-assign')});","// https://github.com/benjamingr/RexExp.escape\nvar $export = require('./$.export')\n  , $re     = require('./$.replacer')(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n$export($export.S, 'RegExp', {escape: function escape(it){ return $re(it); }});\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n","(function (ELEMENT) {\n\tELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n\n\tELEMENT.closest = ELEMENT.closest || function closest(selector) {\n\t\tvar element = this;\n\n\t\twhile (element) {\n\t\t\tif (element.matches(selector)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\telement = element.parentElement;\n\t\t}\n\n\t\treturn element;\n\t};\n}(Element.prototype));\n","var Parser = require('./lib/parser')\n  , Resource = require('./lib/resource')\n  , validationFlag = false;\n\nmodule.exports = {\n\n  parse: function(unparsed) {\n    return new Parser().parse(unparsed, validationFlag);\n  },\n\n  enableValidation: function(flag) {\n    validationFlag = (flag != null) ? flag : true;\n  },\n\n  disableValidation: function() {\n    validationFlag = false;\n  },\n\n  Resource: Resource\n\n};\n","'use strict';\n\n/*\n * A very naive copy-on-write immutable stack. Since the size of the stack\n * is equal to the depth of the embedded resources for one HAL resource, the bad\n * performance for the copy-on-write approach is probably not a problem at all.\n * Might be replaced by a smarter solution later. Or not. Whatever.\n */\nfunction ImmutableStack() {\n  if (arguments.length >= 1) {\n    this._array = arguments[0];\n  } else {\n    this._array = [];\n  }\n}\n\nImmutableStack.prototype.array = function() {\n  return this._array;\n};\n\nImmutableStack.prototype.isEmpty = function(array) {\n  return this._array.length === 0;\n};\n\nImmutableStack.prototype.push = function(element) {\n  var array = this._array.slice(0);\n  array.push(element);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.pop = function() {\n  var array = this._array.slice(0, this._array.length - 1);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.peek = function() {\n  if (this.isEmpty()) {\n    throw new Error('can\\'t peek on empty stack');\n  }\n  return this._array[this._array.length - 1];\n};\n\nmodule.exports = ImmutableStack;\n","'use strict';\n\nvar Resource = require('./resource')\n  , Stack = require('./immutable_stack');\n\nvar linkSpec = {\n  href: { required: true, defaultValue: null },\n  templated: { required: false, defaultValue: false },\n  type: { required: false, defaultValue: null },\n  deprecation: { required: false, defaultValue: null },\n  name: { required: false, defaultValue: null },\n  profile: { required: false, defaultValue: null },\n  title: { required: false, defaultValue: null },\n  hreflang: { required: false, defaultValue: null }\n};\n\nfunction Parser() {\n}\n\nParser.prototype.parse = function parse(unparsed, validationFlag) {\n  var validation = validationFlag ? [] : null;\n  return _parse(unparsed, validation, new Stack());\n};\n\nfunction _parse(unparsed, validation, path) {\n  if (unparsed == null) {\n    return unparsed;\n  }\n  var allLinkArrays = parseLinks(unparsed._links, validation,\n      path.push('_links'));\n  var curies = parseCuries(allLinkArrays);\n  var allEmbeddedArrays = parseEmbeddedResourcess(unparsed._embedded,\n      validation, path.push('_embedded'));\n  var resource = new Resource(allLinkArrays, curies, allEmbeddedArrays,\n      validation);\n  copyNonHalProperties(unparsed, resource);\n  resource._original = unparsed;\n  return resource;\n}\n\nfunction parseLinks(links, validation, path) {\n  links = parseHalProperty(links, parseLink, validation, path);\n  if (links == null || links.self == null) {\n    // No links at all? Then it implictly misses the self link which it SHOULD\n    // have according to spec\n    reportValidationIssue('Resource does not have a self link', validation,\n        path);\n  }\n  return links;\n}\n\nfunction parseCuries(linkArrays) {\n  if (linkArrays) {\n    return linkArrays.curies;\n  } else {\n    return [];\n  }\n}\n\nfunction parseEmbeddedResourcess(original, parentValidation, path) {\n  var embedded = parseHalProperty(original, identity, parentValidation, path);\n  if (embedded == null) {\n    return embedded;\n  }\n  Object.keys(embedded).forEach(function(key) {\n    embedded[key] = embedded[key].map(function(embeddedElement) {\n      var childValidation = parentValidation != null ? [] : null;\n      var embeddedResource = _parse(embeddedElement, childValidation,\n          path.push(key));\n      embeddedResource._original = embeddedElement;\n      return embeddedResource;\n    });\n  });\n  return embedded;\n}\n\n/*\n * Copy over non-hal properties (everything that is not _links or _embedded)\n * to the parsed resource.\n */\nfunction copyNonHalProperties(unparsed, resource) {\n  Object.keys(unparsed).forEach(function(key) {\n    if (key !== '_links' && key !== '_embedded') {\n      resource[key] = unparsed[key];\n    }\n  });\n}\n\n/*\n * Processes one of the two main hal properties, that is _links or _embedded.\n * Each sub-property is turned into a single element array if it isn't already\n * an array. processingFunction is applied to each array element.\n */\nfunction parseHalProperty(property, processingFunction, validation, path) {\n  if (property == null) {\n    return property;\n  }\n\n  // create a shallow copy of the _links/_embedded object\n  var copy = {};\n\n  // normalize each link/each embedded object and put it into our copy\n  Object.keys(property).forEach(function(key) {\n    copy[key] = arrayfy(key, property[key], processingFunction,\n        validation, path);\n  });\n  return copy;\n}\n\nfunction arrayfy(key, object, fn, validation, path) {\n  if (isArray(object)) {\n    return object.map(function(element) {\n      return fn(key, element, validation, path);\n    });\n  } else {\n    return [fn(key, object, validation, path)];\n  }\n}\n\n\nfunction parseLink(linkKey, link, validation, path) {\n  if (!isObject(link)) {\n    throw new Error('Link object is not an actual object: ' + link +\n      ' [' + typeof link + ']');\n  }\n\n  // create a shallow copy of the link object\n  var copy = shallowCopy(link);\n\n  // add missing properties mandated by spec and do generic validation\n  Object.keys(linkSpec).forEach(function(key) {\n    if (copy[key] == null) {\n      if (linkSpec[key].required) {\n        reportValidationIssue('Link misses required property ' + key + '.',\n            validation, path.push(linkKey));\n      }\n      if (linkSpec[key].defaultValue != null) {\n        copy[key] = linkSpec[key].defaultValue;\n      }\n    }\n  });\n\n  // check more inter-property relations mandated by spec\n  if (copy.deprecation) {\n    log('Warning: Link ' + pathToString(path.push(linkKey)) +\n        ' is deprecated, see ' + copy.deprecation);\n  }\n  if (copy.templated !== true && copy.templated !== false) {\n    copy.templated = false;\n  }\n\n  if (!validation) {\n    return copy;\n  }\n  if (copy.href && copy.href.indexOf('{') >= 0 && !copy.templated) {\n    reportValidationIssue('Link seems to be an URI template ' +\n        'but its \"templated\" property is not set to true.', validation,\n        path.push(linkKey));\n  }\n  return copy;\n}\n\nfunction isArray(o) {\n  return Object.prototype.toString.call(o) === '[object Array]';\n}\n\nfunction isObject(o) {\n  return typeof o === 'object';\n}\n\nfunction identity(key, object) {\n  return object;\n}\n\nfunction reportValidationIssue(message, validation, path) {\n  if (validation) {\n    validation.push({\n      path: pathToString(path),\n      message: message\n    });\n  }\n}\n\n// TODO fix this ad hoc mess - does ie support console.log as of ie9?\nfunction log(message) {\n  if (typeof console !== 'undefined' && typeof console.log === 'function') {\n    console.log(message);\n  }\n}\n\nfunction shallowCopy(source) {\n  var copy = {};\n  Object.keys(source).forEach(function(key) {\n    copy[key] = source[key];\n  });\n  return copy;\n}\n\nfunction pathToString(path) {\n  var s = '$.';\n  for (var i = 0; i < path.array().length; i++) {\n    s += path.array()[i] + '.';\n  }\n  s = s.substring(0, s.length - 1);\n  return s;\n}\n\nmodule.exports = Parser;\n","'use strict';\n\nfunction Resource(links, curies, embedded, validationIssues) {\n  var self = this;\n  this._links = links || {};\n  this._initCuries(curies);\n  this._embedded = embedded || {};\n  this._validation = validationIssues || [];\n}\n\nResource.prototype._initCuries = function(curies) {\n  this._curiesMap = {};\n  if (!curies) {\n    this._curies = [];\n  } else {\n    this._curies = curies;\n    for (var i = 0; i < this._curies.length; i++) {\n      var curie = this._curies[i];\n      this._curiesMap[curie.name] = curie;\n    }\n  }\n  this._preResolveCuries();\n};\n\nResource.prototype._preResolveCuries = function() {\n  this._resolvedCuriesMap = {};\n  for (var i = 0; i < this._curies.length; i++) {\n    var curie = this._curies[i];\n    if (!curie.name) {\n      continue;\n    }\n    for (var rel in this._links) {\n      if (rel !== 'curies') {\n        this._preResolveCurie(curie, rel);\n      }\n    }\n  }\n};\n\nResource.prototype._preResolveCurie = function(curie, rel) {\n  var link = this._links[rel];\n  var prefixAndReference = rel.split(/:(.+)/);\n  var candidate = prefixAndReference[0];\n  if (curie.name === candidate) {\n    if (curie.templated && prefixAndReference.length >= 1) {\n      // TODO resolving templated CURIES should use a small uri template\n      // lib, not coded here ad hoc\n      var href = curie.href.replace(/(.*){(.*)}(.*)/, '$1' +\n          prefixAndReference[1] + '$3');\n      this._resolvedCuriesMap[href] = rel;\n    } else {\n      this._resolvedCuriesMap[curie.href] = rel;\n    }\n  }\n};\n\nResource.prototype.allLinkArrays = function() {\n  return this._links;\n};\n\nResource.prototype.linkArray = function(key) {\n  return propertyArray(this._links, key);\n};\n\nResource.prototype.link = function(key, index) {\n  return elementOfPropertyArray(this._links, key, index);\n};\n\nResource.prototype.hasCuries = function(key) {\n  return this._curies.length > 0;\n};\n\nResource.prototype.curieArray = function(key) {\n  return this._curies;\n};\n\nResource.prototype.curie = function(name) {\n  return this._curiesMap[name];\n};\n\nResource.prototype.reverseResolveCurie = function(fullUrl) {\n  return this._resolvedCuriesMap[fullUrl];\n};\n\nResource.prototype.allEmbeddedResourceArrays = function () {\n  return this._embedded;\n};\n\nResource.prototype.embeddedResourceArray = function(key) {\n  return propertyArray(this._embedded, key);\n};\n\nResource.prototype.embeddedResource = function(key, index) {\n  return elementOfPropertyArray(this._embedded, key, index);\n};\n\nResource.prototype.original = function() {\n  return this._original;\n};\n\nfunction propertyArray(object, key) {\n  return object != null ? object[key] : null;\n}\n\nfunction elementOfPropertyArray(object, key, index) {\n  index = index || 0;\n  var array = propertyArray(object, key);\n  if (array != null && array.length >= 1) {\n    return array[index];\n  }\n  return null;\n}\n\nResource.prototype.validationIssues = function() {\n  return this._validation;\n};\n\n// alias definitions\nResource.prototype.allLinks = Resource.prototype.allLinkArrays;\nResource.prototype.allEmbeddedArrays =\n    Resource.prototype.allEmbeddedResources =\n    Resource.prototype.allEmbeddedResourceArrays;\nResource.prototype.embeddedArray = Resource.prototype.embeddedResourceArray;\nResource.prototype.embedded = Resource.prototype.embeddedResource;\nResource.prototype.validation = Resource.prototype.validationIssues;\n\nmodule.exports = Resource;\n","module.exports=function(n){var t={},e=[];n=n||this,n.on=function(e,r,l){return(t[e]=t[e]||[]).push([r,l]),n},n.off=function(r,l){r||(t={});for(var o=t[r]||e,u=o.length=l?o.length:0;u--;)l==o[u][0]&&o.splice(u,1);return n},n.emit=function(r){for(var l,o=t[r]||e,u=o.length>0?o.slice(0,o.length):o,i=0;l=u[i++];)l[0].apply(l[1],e.slice.call(arguments,1));return n}};","module.exports={\"v\":4,\"t\":[{\"t\":7,\"e\":\"input\",\"m\":[{\"n\":\"type\",\"f\":\"text\",\"t\":13},{\"n\":\"autocomplete\",\"f\":\"off\",\"t\":13},{\"n\":\"value\",\"f\":[{\"t\":2,\"r\":\"query\"}],\"t\":13},{\"n\":\"class\",\"f\":[\"tp-ac__input \",{\"t\":2,\"r\":\"class\"}],\"t\":13},{\"n\":\"placeholder\",\"f\":[{\"t\":2,\"r\":\"placeholder\"}],\"t\":13},{\"n\":\"tabindex\",\"f\":[{\"t\":2,\"r\":\"tabindex\"}],\"t\":13}]}]}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9Vc2Vycy9wZXRlci9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvYXN0cm9sb2d5L2NvbXBpbGUvYXV0b2NvbXBsZXRlL2pzL2F1dG9jb21wbGV0ZS1yYWN0aXZlLmpzIiwiQzovVXNlcnMvcGV0ZXIvRG9jdW1lbnRzL2RldmVsb3BtZW50L2FzdHJvbG9neS9jb21waWxlL2F1dG9jb21wbGV0ZS9qcy9hdXRvY29tcGxldGUuanMiLCJub2RlX21vZHVsZXMvY2xhc3NsaXN0LXBvbHlmaWxsL3NyYy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vYXJyYXkvZmluZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2Fzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vcmVnZXhwL2VzY2FwZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmEtZnVuY3Rpb24uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5hZGQtdG8tdW5zY29wYWJsZXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5hcnJheS1tZXRob2RzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYXJyYXktc3BlY2llcy1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jb2YuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jb3JlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY3R4LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZGVmaW5lZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmV4cG9ydC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmZhaWxzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZ2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmlzLWFycmF5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXMtb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5vYmplY3QtYXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQucmVwbGFjZXIuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zaGFyZWQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC50by1pbnRlZ2VyLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudG8tbGVuZ3RoLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudG8tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudWlkLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQud2tzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5hcnJheS5maW5kLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNy5yZWdleHAuZXNjYXBlLmpzIiwibm9kZV9tb2R1bGVzL2RlYm91bmNlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2VsZW1lbnQtY2xvc2VzdC9jbG9zZXN0LmpzIiwibm9kZV9tb2R1bGVzL2hhbGZyZWQvaGFsZnJlZC5qcyIsIm5vZGVfbW9kdWxlcy9oYWxmcmVkL2xpYi9pbW11dGFibGVfc3RhY2suanMiLCJub2RlX21vZHVsZXMvaGFsZnJlZC9saWIvcGFyc2VyLmpzIiwibm9kZV9tb2R1bGVzL2hhbGZyZWQvbGliL3Jlc291cmNlLmpzIiwibm9kZV9tb2R1bGVzL21pbml2ZW50cy9kaXN0L21pbml2ZW50cy5jb21tb25qcy5taW4uanMiLCJ0ZW1wbGF0ZXMvYXV0b2NvbXBsZXRlLnJhYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7MkNDRW1CLGtDQUFrQzs7Ozs0QkFFNUIsZ0JBQWdCOzs7O3dDQUNSLCtCQUErQjs7OztxQkFFakQsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixVQUFRLHVDQUFzQjs7QUFFOUIsTUFBSSxFQUFFO0FBQ0osU0FBSyxFQUFFLEVBQUU7R0FDVjs7QUFFRCxVQUFRLEVBQUEsb0JBQUc7OztlQUM2RCxJQUFJLENBQUMsR0FBRyxFQUFFOztRQUF4RSxRQUFRLFFBQVIsUUFBUTtRQUFFLE9BQU8sUUFBUCxPQUFPO1FBQUUsU0FBUyxRQUFULFNBQVM7UUFBRSxZQUFZLFFBQVosWUFBWTtRQUFFLE1BQU0sUUFBTixNQUFNO1FBQUUsS0FBSyxRQUFMLEtBQUs7O0FBRWpFLFFBQUksQ0FBQyxFQUFFLEdBQUcsOEJBQWlCLDhDQUFPLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRTtBQUM1RCxjQUFRLEVBQVIsUUFBUSxFQUFFLE9BQU8sRUFBUCxPQUFPLEVBQUUsU0FBUyxFQUFULFNBQVMsRUFBRSxZQUFZLEVBQVosWUFBWSxFQUFFLE1BQU0sRUFBTixNQUFNLEVB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUEE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0hBOztBQ0FBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIGdsb2JhbCBSYWN0aXZlICovXHJcblxyXG5pbXBvcnQgYXNzaWduIGZyb20gJ2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvYXNzaWduJztcclxuXHJcbmltcG9ydCBBdXRvY29tcGxldGUgZnJvbSAnLi9hdXRvY29tcGxldGUnO1xyXG5pbXBvcnQgQXV0b2NvbXBsZXRlVGVtcGxhdGUgZnJvbSAnLi4vdGVtcGxhdGVzL2F1dG9jb21wbGV0ZS5yYWMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmFjdGl2ZS5leHRlbmQoe1xyXG4gIHRlbXBsYXRlOiBBdXRvY29tcGxldGVUZW1wbGF0ZSxcclxuXHJcbiAgZGF0YToge1xyXG4gICAgcXVlcnk6ICcnLFxyXG4gIH0sXHJcblxyXG4gIG9ucmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBtYXhJdGVtcywgYXBpUm9vdCwgZ2VvTG9jYXRlLCBpdGVtVGVtcGxhdGUsIGVtYmVkcywgdmFsdWUgfSA9IHRoaXMuZ2V0KCk7XHJcblxyXG4gICAgdGhpcy5hYyA9IG5ldyBBdXRvY29tcGxldGUoYXNzaWduKHsgZWw6IHRoaXMuZmluZCgnaW5wdXQnKSB9LCB7XHJcbiAgICAgIG1heEl0ZW1zLCBhcGlSb290LCBnZW9Mb2NhdGUsIGl0ZW1UZW1wbGF0ZSwgZW1iZWRzLCB2YWx1ZSxcclxuICAgIH0pKTtcclxuXHJcbiAgICB0aGlzLmFjLm9uKCdjaGFuZ2UnLCB2YWwgPT4gdGhpcy5zZXQoJ3ZhbHVlJywgdmFsKSk7XHJcbiAgICB0aGlzLmFjLm9uKCdxdWVyeWNoYW5nZScsIHF1ZXJ5ID0+IHRoaXMuc2V0KCdxdWVyeScsIHF1ZXJ5KSk7XHJcbiAgfSxcclxuXHJcbiAgb250ZWFyZG93bigpIHtcclxuICAgIHRoaXMuYWMuZGVzdHJveSgpO1xyXG4gIH0sXHJcbn0pO1xyXG4iLCJpbXBvcnQgJ2NsYXNzbGlzdC1wb2x5ZmlsbCc7XHJcbmltcG9ydCAnZWxlbWVudC1jbG9zZXN0JztcclxuXHJcbmltcG9ydCBoYWxmcmVkIGZyb20gJ2hhbGZyZWQnO1xyXG5pbXBvcnQgZXZlbnRzIGZyb20gJ21pbml2ZW50cyc7XHJcblxyXG5pbXBvcnQgYXNzaWduIGZyb20gJ2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvYXNzaWduJztcclxuaW1wb3J0IGZpbmQgZnJvbSAnY29yZS1qcy9saWJyYXJ5L2ZuL2FycmF5L2ZpbmQnO1xyXG5pbXBvcnQgZXNjYXBlUmVnZXhwIGZyb20gJ2NvcmUtanMvbGlicmFyeS9mbi9yZWdleHAvZXNjYXBlJztcclxuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2RlYm91bmNlJztcclxuXHJcbmNvbnN0IEtleSA9IHsgQkFDSzogOCwgVEFCOiA5LCBFTlRFUjogMTMsIFVQOiAzOCwgRE9XTjogNDAgfTtcclxuY29uc3QgQ09OVEFJTkVSX1RFTVBMQVRFID0gJzxkaXYgY2xhc3M9XCJ0cC1hdXRvY29tcGxldGVcIj48dWwgY2xhc3M9XCJ0cC1hY19fbGlzdFwiPjwvdWw+PC9kaXY+JztcclxuY29uc3QgSU5QVVRfQ0xBU1MgPSAndHAtYWNfX2lucHV0JztcclxuY29uc3QgaXRlbVdyYXBwZXJUZW1wbGF0ZSA9IGl0ZW0gPT4gYDxsaSBjbGFzcz1cInRwLWFjX19pdGVtXCI+JHtpdGVtfTwvbGk+YDtcclxuY29uc3QgTk9fUkVTVUxUU19URU1QTEFURSA9ICc8bGkgY2xhc3M9XCJ0cC1hY19faXRlbSBuby1yZXN1bHRzXCI+Tm8gbWF0Y2hlczwvbGk+JztcclxuY29uc3QgR0VPTE9DQVRFX1RFTVBMQVRFID0gJzxsaSBjbGFzcz1cInRwLWFjX19pdGVtIGdlb2xvY2F0ZVwiPkRldGVjdCBteSBjdXJyZW50IGxvY2F0aW9uPC9saT4nO1xyXG5cclxuLy8gRGVmYXVsdCBpdGVtIHRlbXBsYXRlLCB3cmFwcyB0aXRsZSBtYXRjaGVzXHJcbmNvbnN0IElURU1fVEVNUExBVEUgPSBmdW5jdGlvbiByZW5kZXJJdGVtKGl0ZW0pIHtcclxuICByZXR1cm4gdGhpcy53cmFwTWF0Y2hlcyhpdGVtLnRpdGxlKTtcclxufTtcclxuXHJcbi8vIFNob3J0aGFuZHNcclxuSFRNTEVsZW1lbnQucHJvdG90eXBlLm9uID0gSFRNTEVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7XHJcbkhUTUxFbGVtZW50LnByb3RvdHlwZS5vZmYgPSBIVE1MRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcclxuXHJcblxyXG4vKipcclxuICogVGVsZXBvcnQgQ2l0aWVzIEF1dG9jb21wbGV0ZVxyXG4gKi9cclxuY2xhc3MgVGVsZXBvcnRBdXRvY29tcGxldGUge1xyXG4gIGdldCBxdWVyeSgpIHsgcmV0dXJuIHRoaXMuX3F1ZXJ5OyB9XHJcbiAgc2V0IHF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICBpZiAocXVlcnkgPT09IHRoaXMuX3F1ZXJ5KSByZXR1cm4gcXVlcnk7XHJcblxyXG4gICAgdGhpcy5fcXVlcnkgPSBxdWVyeTtcclxuICAgIHRoaXMuZWwudmFsdWUgPSBxdWVyeTtcclxuICAgIHRoaXMuZW1pdCgncXVlcnljaGFuZ2UnLCBxdWVyeSk7XHJcbiAgfVxyXG5cclxuICBnZXQgYWN0aXZlSW5kZXgoKSB7IHJldHVybiB0aGlzLl9hY3RpdmVJbmRleDsgfVxyXG4gIHNldCBhY3RpdmVJbmRleChpbmRleCkge1xyXG4gICAgLy8gUmVtb3ZlIG9sZCBoaWdobGlnaHRcclxuICAgIGNvbnN0IG9sZE5vZGUgPSB0aGlzLmxpc3QuY2hpbGROb2Rlc1t0aGlzLl9hY3RpdmVJbmRleF07XHJcbiAgICBpZiAob2xkTm9kZSkgb2xkTm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuXHJcbiAgICB0aGlzLl9hY3RpdmVJbmRleCA9IGluZGV4O1xyXG5cclxuICAgIC8vIFNldCBoaWdobGlnaHRcclxuICAgIGNvbnN0IGFjdGl2ZU5vZGUgPSB0aGlzLmxpc3QuY2hpbGROb2Rlc1tpbmRleF07XHJcbiAgICBpZiAoYWN0aXZlTm9kZSkgYWN0aXZlTm9kZS5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIC8vIFNob3cgb3IgaGlkZSBsb2FkaW5nXHJcbiAgc2V0IGxvYWRpbmcodG9nZ2xlKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdzcGlubmVyJywgdG9nZ2xlKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBQYXJzZSBhcmd1bWVudHMgYW5kIHdyYXAgaW5wdXRcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih7XHJcbiAgICBlbCA9IG51bGwsIHZhbHVlLCBtYXhJdGVtcyA9IDEwLCBpdGVtVGVtcGxhdGUgPSBJVEVNX1RFTVBMQVRFLFxyXG4gICAgZ2VvTG9jYXRlID0gdHJ1ZSwgYXBpUm9vdCA9ICdodHRwczovL2FwaS50ZWxlcG9ydC5vcmcvYXBpJywgYXBpVmVyc2lvbiA9IDEsXHJcbiAgICBlbWJlZHMgPSAnY2l0eTpjb3VudHJ5LGNpdHk6YWRtaW4xX2RpdmlzaW9uLGNpdHk6dGltZXpvbmUvdHo6b2Zmc2V0cy1ub3csY2l0eTp1cmJhbl9hcmVhJyxcclxuICB9ID0ge30pIHtcclxuICAgIGV2ZW50cyh0aGlzKTtcclxuXHJcbiAgICBjb25zdCBlbGVtID0gKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcclxuICAgIHRoaXMuc2V0dXBJbnB1dChlbGVtKTtcclxuXHJcbiAgICBhc3NpZ24odGhpcywge1xyXG4gICAgICBtYXhJdGVtcywgZ2VvTG9jYXRlLCBhcGlSb290LCBhcGlWZXJzaW9uLCBpdGVtVGVtcGxhdGUsIGVtYmVkcywgcmVzdWx0czogW10sXHJcbiAgICAgIF9hY3RpdmVJbmRleDogMCwgX2NhY2hlOiB7fSwgX3F1ZXJ5OiB0aGlzLmVsLnZhbHVlLCB2YWx1ZSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFByZWZldGNoIHJlc3VsdHNcclxuICAgIGlmICh0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUudGl0bGUpIHtcclxuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMudmFsdWUudGl0bGU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucXVlcnkpIHtcclxuICAgICAgdGhpcy5mZXRjaFJlc3VsdHMoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldFJlc3VsdEJ5VGl0bGUodGhpcy5xdWVyeSk7XHJcbiAgICAgICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCB0aGlzLnZhbHVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZXRDaXRpZXMgPSBkZWJvdW5jZSh0aGlzLmdldENpdGllcywgMjAwKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdCBzaG9ydGhhbmRcclxuICAgKi9cclxuICBzdGF0aWMgaW5pdChlbCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCBvcHQgPSAodHlwZW9mIGVsID09PSAnc3RyaW5nJyB8fCBlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpID8gYXNzaWduKG9wdGlvbnMsIHsgZWwgfSkgOiBlbDtcclxuICAgIHJldHVybiBuZXcgVGVsZXBvcnRBdXRvY29tcGxldGUob3B0KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbiB1cCB0aGUgY29udGFpbmVyXHJcbiAgICovXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMuZWwub2ZmKCdpbnB1dCcsIHRoaXMub25pbnB1dCk7XHJcbiAgICB0aGlzLmVsLm9mZigna2V5ZG93bicsIHRoaXMub25rZXlkb3duKTtcclxuICAgIHRoaXMuZWwub2ZmKCdmb2N1cycsIHRoaXMub25mb2N1cyk7XHJcbiAgICB0aGlzLmVsLm9mZignYmx1cicsIHRoaXMub25ibHVyKTtcclxuICAgIHRoaXMuZWwub2ZmKCdjbGljaycsIHRoaXMub25jbGljayk7XHJcblxyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKElOUFVUX0NMQVNTKTtcclxuXHJcbiAgICBjb25zdCBjb250YWluZXJQYXJlbnQgPSB0aGlzLmNvbnRhaW5lci5wYXJlbnROb2RlO1xyXG4gICAgY29udGFpbmVyUGFyZW50LnJlcGxhY2VDaGlsZCh0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCksIHRoaXMuY29udGFpbmVyKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDbGVhciB0aGUgc2VsZWN0ZWQgdmFsdWVcclxuICAgKi9cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMucmVzdWx0cyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RCeUluZGV4KDApO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFdyYXAgaW5wdXQgbm9kZSBpbiBjb250YWluZXJcclxuICAgKi9cclxuICBzZXR1cElucHV0KGVsKSB7XHJcbiAgICBpZiAoIWVsIHx8ICEoZWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVsZW1lbnQgZ2l2ZW4nKTtcclxuXHJcbiAgICBlbC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWJlZ2luJywgQ09OVEFJTkVSX1RFTVBMQVRFKTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnY29udGFpbmVyJywgeyB2YWx1ZTogZWwucHJldmlvdXNTaWJsaW5nIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdsaXN0JywgeyB2YWx1ZTogdGhpcy5jb250YWluZXIuZmlyc3RDaGlsZCB9KTtcclxuXHJcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMuY29udGFpbmVyLmluc2VydEJlZm9yZShlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKSwgdGhpcy5saXN0KTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoSU5QVVRfQ0xBU1MpO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZWwnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiBpbnB1dCB9KTtcclxuXHJcbiAgICB0aGlzLmVsLm9uKCdpbnB1dCcsIHRoaXMub25pbnB1dC5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuZWwub24oJ2tleWRvd24nLCB0aGlzLm9ua2V5ZG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuZWwub24oJ2ZvY3VzJywgdGhpcy5vbmZvY3VzLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5lbC5vbignYmx1cicsIHRoaXMub25ibHVyLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5lbC5vbignY2xpY2snLCB0aGlzLm9uY2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5saXN0Lm9uKCdtb3VzZWRvd24nLCB0aGlzLm9ubGlzdGNsaWNrLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXZlbnQgaGFuZGxlcnNcclxuICAgKi9cclxuXHJcbiAgLy8gQ2xpY2tlZCBvbiBsaXN0IGl0ZW0sIHNlbGVjdCBpdGVtXHJcbiAgb25saXN0Y2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gW10uaW5kZXhPZi5jYWxsKHRoaXMubGlzdC5jaGlsZHJlbiwgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy50cC1hY19faXRlbScpKTtcclxuICAgIHRoaXMuc2VsZWN0QnlJbmRleChpbmRleCk7XHJcbiAgfVxyXG5cclxuICAvLyBTZWxlY3QgdGV4dCBvbiBjbGlja1xyXG4gIG9uY2xpY2soKSB7IHRoaXMuZWwuc2VsZWN0KCk7IH1cclxuXHJcbiAgLy8gSW5wdXQgaGFzIGZvY3VzLCBvcGVuIGxpc3RcclxuICBvbmZvY3VzKCkgeyB0aGlzLnJlbmRlckxpc3QoKTsgfVxyXG5cclxuICAvLyBJbnB1dCBsb3N0IGZvY3VzLCBjbG9zZSBsaXN0XHJcbiAgb25ibHVyKCkgeyB0aGlzLmxpc3QuaW5uZXJIVE1MID0gJyc7IH1cclxuXHJcbiAgLy8gSW5wdXQgd2FzIHR5cGVkIGludG9cclxuICBvbmlucHV0KCkge1xyXG4gICAgdGhpcy5fcXVlcnkgPSB0aGlzLmVsLnZhbHVlO1xyXG4gICAgdGhpcy5mZXRjaFJlc3VsdHMoKCkgPT4gdGhpcy5yZW5kZXJMaXN0KCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsbGVkIG9uIGtleXByZXNzZXNcclxuICBvbmtleWRvd24oZXZlbnQpIHtcclxuICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlO1xyXG5cclxuICAgIC8vIFByZXZlbnQgY3Vyc29yIG1vdmVcclxuICAgIGlmIChbS2V5LlVQLCBLZXkuRE9XTl0uaW5kZXhPZihjb2RlKSAhPT0gLTEpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICBjYXNlIEtleS5CQUNLOlxyXG4gICAgICAvLyBDbGVhciBmaWxsZWQgdmFsdWUgb3IgbGFzdCBjaGFyXHJcbiAgICAgIGlmICh0aGlzLnZhbHVlIHx8IHRoaXMucXVlcnkubGVuZ3RoID09PSAxKSB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBLZXkuRU5URVI6XHJcbiAgICAgIC8vIFByZXZlbnQgc3VibWl0IGlmIHF1ZXJ5IGlzIHRvIGJlIHNlbGVjdGVkXHJcbiAgICAgIGlmICghdGhpcy52YWx1ZSAmJiB0aGlzLnF1ZXJ5KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnNlbGVjdEJ5SW5kZXgodGhpcy5hY3RpdmVJbmRleCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBLZXkuVEFCOiBpZiAoIXRoaXMudmFsdWUpIHRoaXMuc2VsZWN0QnlJbmRleCh0aGlzLmFjdGl2ZUluZGV4KTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIEtleS5VUDogdGhpcy5hY3RpdmVJbmRleCA9IE1hdGgubWF4KDAsIHRoaXMuYWN0aXZlSW5kZXggLSAxKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIEtleS5ET1dOOiB0aGlzLmFjdGl2ZUluZGV4ID0gTWF0aC5taW4odGhpcy5yZXN1bHRzLmxlbmd0aCAtIDEsIHRoaXMuYWN0aXZlSW5kZXggKyAxKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2VsZWN0IG9wdGlvbiBmcm9tIGxpc3QgYnkgaW5kZXhcclxuICAgKi9cclxuICBzZWxlY3RCeUluZGV4KGluZGV4KSB7XHJcbiAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5yZXN1bHRzW2luZGV4XSB8fCBudWxsO1xyXG5cclxuICAgIGNvbnN0IGlzR2VvbG9jYXRlID0gdGhpcy5saXN0LmZpcnN0Q2hpbGQgJiYgdGhpcy5saXN0LmZpcnN0Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnZW9sb2NhdGUnKTtcclxuICAgIGlmIChpc0dlb2xvY2F0ZSkgdGhpcy5jdXJyZW50TG9jYXRpb24oKTtcclxuXHJcbiAgICBpZiAob2xkVmFsdWUgIT09IHRoaXMudmFsdWUgJiYgIWlzR2VvbG9jYXRlKSB0aGlzLmVtaXQoJ2NoYW5nZScsIHRoaXMudmFsdWUpO1xyXG5cclxuICAgIHRoaXMubGlzdC5pbm5lckhUTUwgPSAnJztcclxuICAgIHRoaXMucXVlcnkgPSB0aGlzLnZhbHVlID8gdGhpcy52YWx1ZS50aXRsZSA6ICcnO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFdyYXAgbWF0Y2hpbmcgcmVzdWx0IG5hbWVzIGluIDxzcGFuPnNcclxuICAgKi9cclxuICB3cmFwTWF0Y2hlcyhzdHIgPSAnJykge1xyXG4gICAgbGV0IHJlcyA9IHN0cjtcclxuXHJcbiAgICB0aGlzLnF1ZXJ5XHJcbiAgICAgIC5zcGxpdCgvW1xcLFxcc10rLylcclxuICAgICAgLmZpbHRlcihxciA9PiAhIXFyKVxyXG4gICAgICAuZm9yRWFjaChxdWVyeSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlciA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnZXhwKHF1ZXJ5KSArICcoPyFbXjxdKj58W148Pl0qPFxcLyknLCAnZ2knKTtcclxuICAgICAgICByZXMgPSByZXMucmVwbGFjZShtYXRjaGVyLCAnPHNwYW4+JCY8L3NwYW4+Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVuZGVyIHJlc3VsdCBsaXN0XHJcbiAgICovXHJcbiAgcmVuZGVyTGlzdCh7IGdlb0xvY2F0ZSA9IHRoaXMuZ2VvTG9jYXRlIH0gPSB7fSkge1xyXG4gICAgbGV0IHJlc3VsdHMgPSB0aGlzLnJlc3VsdHMubWFwKHJlcyA9PlxyXG4gICAgICBpdGVtV3JhcHBlclRlbXBsYXRlKHRoaXMuaXRlbVRlbXBsYXRlKHJlcykpKVxyXG4gICAgICAuc2xpY2UoMCwgdGhpcy5tYXhJdGVtcykuam9pbignJyk7XHJcblxyXG4gICAgaWYgKCFyZXN1bHRzICYmIHRoaXMucXVlcnkgIT09ICcnICYmICF0aGlzLnZhbHVlKSByZXN1bHRzID0gTk9fUkVTVUxUU19URU1QTEFURTtcclxuICAgIGlmICh0aGlzLnF1ZXJ5ID09PSAnJyAmJiBnZW9Mb2NhdGUpIHJlc3VsdHMgPSBHRU9MT0NBVEVfVEVNUExBVEU7XHJcbiAgICB0aGlzLmxpc3QuaW5uZXJIVE1MID0gcmVzdWx0cztcclxuXHJcbiAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCB2YWx1ZSBmcm9tIHJlc3VsdHMgYnkgdGl0bGVcclxuICAgKi9cclxuICBnZXRSZXN1bHRCeVRpdGxlKHRpdGxlKSB7XHJcbiAgICBpZiAoIXRoaXMucmVzdWx0cyB8fCAhdGl0bGUpIHJldHVybiBudWxsO1xyXG4gICAgcmV0dXJuIGZpbmQodGhpcy5yZXN1bHRzLCByZXMgPT4gcmVzLnRpdGxlLmluZGV4T2YodGl0bGUpICE9PSAtMSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcGlja2VyIGRhdGEgZnJvbSBjYWNoZSBvciBBUElcclxuICAgKi9cclxuICBmZXRjaFJlc3VsdHMoY2IgPSBmdW5jdGlvbiBub29wKCkge30pIHtcclxuICAgIC8vIENhbmNlbCBvbGQgcmVxdWVzdFxyXG4gICAgaWYgKHRoaXMucmVxKSB0aGlzLnJlcS5hYm9ydCgpO1xyXG5cclxuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuX2NhY2hlW3RoaXMucXVlcnldO1xyXG4gICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICB0aGlzLnJlc3VsdHMgPSBjYWNoZWQ7XHJcbiAgICAgIHJldHVybiBjYigpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVxID0gdGhpcy5nZXRDaXRpZXMocmVzdWx0cyA9PiB7XHJcbiAgICAgIHRoaXMucmVzdWx0cyA9IHRoaXMuX2NhY2hlW3RoaXMucXVlcnldID0gcmVzdWx0cztcclxuICAgICAgY2IoKTtcclxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEdlb2xvY2F0ZSBjdXJyZW50IGNpdHlcclxuICAgKi9cclxuICBjdXJyZW50TG9jYXRpb24oKSB7XHJcbiAgICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIGNvbnN0IGVtYmVkID0gYGxvY2F0aW9uOm5lYXJlc3QtY2l0aWVzL2xvY2F0aW9uOm5lYXJlc3QtY2l0eS8ke3RoaXMuZW1iZWRzID8gYHske3RoaXMuZW1iZWRzfX1gIDogJyd9YDtcclxuXHJcbiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy5vbGRQbGFjZWhvbGRlciA9IHRoaXMuZWwucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLmVsLnBsYWNlaG9sZGVyID0gJ0RldGVjdGluZyBsb2NhdGlvbi4uLic7XHJcblxyXG4gICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbigoeyBjb29yZHMgfSkgPT4ge1xyXG4gICAgICByZXEub3BlbignR0VUJywgYCR7dGhpcy5hcGlSb290fS9sb2NhdGlvbnMvJHtjb29yZHMubGF0aXR1ZGV9LCR7Y29vcmRzLmxvbmdpdHVkZX0vP2VtYmVkPSR7ZW1iZWR9YCk7XHJcbiAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCBgYXBwbGljYXRpb24vdm5kLnRlbGVwb3J0LnYke3RoaXMuYXBpVmVyc2lvbn0ranNvbmApO1xyXG4gICAgICByZXEuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHRoaXMucGFyc2VMb2NhdGlvbihKU09OLnBhcnNlKHJlcS5yZXNwb25zZSkpKTtcclxuICAgICAgcmVxLnNlbmQoKTtcclxuICAgIH0sICh7IG1lc3NhZ2UgfSkgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5lbC5wbGFjZWhvbGRlciA9IG1lc3NhZ2U7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5lbC5wbGFjZWhvbGRlciA9IHRoaXMub2xkUGxhY2Vob2xkZXIsIDMwMDApO1xyXG4gICAgfSwgeyB0aW1lb3V0OiA1MDAwIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGN1cnJlbnQgbG9jYXRpb24gQVBJIHJlc3BvbnNlXHJcbiAgICovXHJcbiAgcGFyc2VMb2NhdGlvbihqc29uKSB7XHJcbiAgICBjb25zdCByZXMgPSBoYWxmcmVkLnBhcnNlKGpzb24pO1xyXG4gICAgY29uc3QgbmVhcmVzdCA9IHJlcy5lbWJlZGRlZEFycmF5KCdsb2NhdGlvbjpuZWFyZXN0LWNpdGllcycpWzBdO1xyXG4gICAgaWYgKG5lYXJlc3QpIHtcclxuICAgICAgdGhpcy5yZXN1bHRzID0gW3RoaXMucGFyc2VDaXR5KG5lYXJlc3QpXTtcclxuICAgICAgaWYgKHRoaXMuZ2VvTG9jYXRlID09PSAnbm9waWNrJykge1xyXG4gICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckxpc3QoeyBnZW9Mb2NhdGU6IGZhbHNlIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0QnlJbmRleCgwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmVsLnBsYWNlaG9sZGVyID0gdGhpcy5vbGRQbGFjZWhvbGRlcjtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNYWtlIHRoZSBBUEkgY2FsbFxyXG4gICAqL1xyXG4gIGdldENpdGllcyhjYikge1xyXG4gICAgaWYgKCF0aGlzLnF1ZXJ5KSByZXR1cm4gY2IoW10pO1xyXG4gICAgY29uc3QgZW1iZWQgPSBgY2l0eTpzZWFyY2gtcmVzdWx0cy9jaXR5Oml0ZW0vJHt0aGlzLmVtYmVkcyA/IGB7JHt0aGlzLmVtYmVkc319YCA6ICcnfWA7XHJcblxyXG4gICAgY29uc3QgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBjb25zdCBxdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnF1ZXJ5KTtcclxuICAgIHJlcS5vcGVuKCdHRVQnLCBgJHt0aGlzLmFwaVJvb3R9L2NpdGllcy8/c2VhcmNoPSR7cXVlcnl9JmVtYmVkPSR7ZW1iZWR9JmxpbWl0PSR7dGhpcy5tYXhJdGVtc31gKTtcclxuICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCBgYXBwbGljYXRpb24vdm5kLnRlbGVwb3J0LnYke3RoaXMuYXBpVmVyc2lvbn0ranNvbmApO1xyXG4gICAgcmVxLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBoYWxmcmVkLnBhcnNlKEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKSlcclxuICAgICAgICAuZW1iZWRkZWRBcnJheSgnY2l0eTpzZWFyY2gtcmVzdWx0cycpXHJcbiAgICAgICAgLm1hcChyZXMgPT4gdGhpcy5wYXJzZUNpdHkocmVzKSk7XHJcblxyXG4gICAgICBjYihyZXN1bHRzKTtcclxuICAgIH0pO1xyXG4gICAgcmVxLnNlbmQoKTtcclxuXHJcbiAgICByZXR1cm4gcmVxO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGNpdHlcclxuICAgKi9cclxuICBwYXJzZUNpdHkocmVzKSB7XHJcbiAgICBjb25zdCBjaXR5ID0gcmVzLmVtYmVkZGVkKCdsb2NhdGlvbjpuZWFyZXN0LWNpdHknKSB8fCByZXMuZW1iZWRkZWQoJ2NpdHk6aXRlbScpO1xyXG4gICAgY2l0eS5jb3VudHJ5ID0gY2l0eS5lbWJlZGRlZCgnY2l0eTpjb3VudHJ5Jyk7XHJcbiAgICBjaXR5LmFkbWluMV9kaXZpc2lvbiA9IGNpdHkuZW1iZWRkZWQoJ2NpdHk6YWRtaW4xX2RpdmlzaW9uJyk7XHJcbiAgICBjaXR5LnRpbWV6b25lID0gY2l0eS5lbWJlZGRlZCgnY2l0eTp0aW1lem9uZScpO1xyXG4gICAgY2l0eS51cmJhbl9hcmVhID0gY2l0eS5lbWJlZGRlZCgnY2l0eTp1cmJhbl9hcmVhJyk7XHJcblxyXG4gICAgY29uc3QgeyBmdWxsX25hbWU6IGZ1bGxOYW1lLCBuYW1lLCBnZW9uYW1lX2lkOiBnZW9uYW1lSWQsIHBvcHVsYXRpb24sXHJcbiAgICAgIGxvY2F0aW9uOiB7IGxhdGxvbjogeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gfSB9ID0gY2l0eTtcclxuXHJcbiAgICBjb25zdCB7IG1hdGNoaW5nX2Z1bGxfbmFtZTogdGl0bGUgPSBmdWxsTmFtZSB9ID0gcmVzO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IHsgdGl0bGUsIG5hbWUsIGdlb25hbWVJZCwgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgcG9wdWxhdGlvbiB9O1xyXG5cclxuICAgIGlmIChjaXR5LmNvdW50cnkpIGFzc2lnbihyZXN1bHQsIHsgY291bnRyeTogY2l0eS5jb3VudHJ5Lm5hbWUgfSk7XHJcbiAgICBpZiAoY2l0eS5hZG1pbjFfZGl2aXNpb24pIHtcclxuICAgICAgY29uc3QgeyBuYW1lOiBhZG1pbjFEaXZpc2lvbiwgZ2VvbmFtZXNfYWRtaW4xX2NvZGU6IGFkbWluMURpdmlzaW9uQ29kZSB9ID0gY2l0eS5hZG1pbjFfZGl2aXNpb247XHJcbiAgICAgIGFzc2lnbihyZXN1bHQsIHsgYWRtaW4xRGl2aXNpb24sIGFkbWluMURpdmlzaW9uQ29kZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2l0eS50aW1lem9uZSkge1xyXG4gICAgICBjb25zdCB0ek5vdyA9IGNpdHkudGltZXpvbmUuZW1iZWRkZWQoJ3R6Om9mZnNldHMtbm93Jyk7XHJcbiAgICAgIGFzc2lnbihyZXN1bHQsIHsgdHpPZmZzZXRNaW51dGVzOiB0ek5vdy50b3RhbF9vZmZzZXRfbWluIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjaXR5LnVyYmFuX2FyZWEpIHtcclxuICAgICAgY29uc3QgeyBzbHVnOiB1YVNsdWcsIG5hbWU6IHVhTmFtZSwgdWFfaWQ6IHVhSWQsIHRlbGVwb3J0X2NpdHlfdXJsOiB1YUNpdHlVcmwgfSA9IGNpdHkudXJiYW5fYXJlYTtcclxuICAgICAgYXNzaWduKHJlc3VsdCwgeyB1YU5hbWUsIHVhSWQsIHVhQ2l0eVVybCwgdWFTbHVnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUZWxlcG9ydEF1dG9jb21wbGV0ZTtcclxuIiwiLypcbiAqIGNsYXNzTGlzdC5qczogQ3Jvc3MtYnJvd3NlciBmdWxsIGVsZW1lbnQuY2xhc3NMaXN0IGltcGxlbWVudGF0aW9uLlxuICogMS4xLjIwMTcwNDI3XG4gKlxuICogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuICogTGljZW5zZTogRGVkaWNhdGVkIHRvIHRoZSBwdWJsaWMgZG9tYWluLlxuICogICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvY2xhc3NMaXN0LmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWRcbiAqL1xuXG4vKmdsb2JhbCBzZWxmLCBkb2N1bWVudCwgRE9NRXhjZXB0aW9uICovXG5cbi8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9jbGFzc0xpc3QuanMvYmxvYi9tYXN0ZXIvY2xhc3NMaXN0LmpzICovXG5cbmlmIChcImRvY3VtZW50XCIgaW4gd2luZG93LnNlbGYpIHtcblxuLy8gRnVsbCBwb2x5ZmlsbCBmb3IgYnJvd3NlcnMgd2l0aCBubyBjbGFzc0xpc3Qgc3VwcG9ydFxuLy8gSW5jbHVkaW5nIElFIDwgRWRnZSBtaXNzaW5nIFNWR0VsZW1lbnQuY2xhc3NMaXN0XG5pZiAoIShcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJfXCIpKSBcblx0fHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmICEoXCJjbGFzc0xpc3RcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwiZ1wiKSkpIHtcblxuKGZ1bmN0aW9uICh2aWV3KSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAoISgnRWxlbWVudCcgaW4gdmlldykpIHJldHVybjtcblxudmFyXG5cdCAgY2xhc3NMaXN0UHJvcCA9IFwiY2xhc3NMaXN0XCJcblx0LCBwcm90b1Byb3AgPSBcInByb3RvdHlwZVwiXG5cdCwgZWxlbUN0clByb3RvID0gdmlldy5FbGVtZW50W3Byb3RvUHJvcF1cblx0LCBvYmpDdHIgPSBPYmplY3Rcblx0LCBzdHJUcmltID0gU3RyaW5nW3Byb3RvUHJvcF0udHJpbSB8fCBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgXCJcIik7XG5cdH1cblx0LCBhcnJJbmRleE9mID0gQXJyYXlbcHJvdG9Qcm9wXS5pbmRleE9mIHx8IGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0dmFyXG5cdFx0XHQgIGkgPSAwXG5cdFx0XHQsIGxlbiA9IHRoaXMubGVuZ3RoXG5cdFx0O1xuXHRcdGZvciAoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9XG5cdC8vIFZlbmRvcnM6IHBsZWFzZSBhbGxvdyBjb250ZW50IGNvZGUgdG8gaW5zdGFudGlhdGUgRE9NRXhjZXB0aW9uc1xuXHQsIERPTUV4ID0gZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UpIHtcblx0XHR0aGlzLm5hbWUgPSB0eXBlO1xuXHRcdHRoaXMuY29kZSA9IERPTUV4Y2VwdGlvblt0eXBlXTtcblx0XHR0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHR9XG5cdCwgY2hlY2tUb2tlbkFuZEdldEluZGV4ID0gZnVuY3Rpb24gKGNsYXNzTGlzdCwgdG9rZW4pIHtcblx0XHRpZiAodG9rZW4gPT09IFwiXCIpIHtcblx0XHRcdHRocm93IG5ldyBET01FeChcblx0XHRcdFx0ICBcIlNZTlRBWF9FUlJcIlxuXHRcdFx0XHQsIFwiQW4gaW52YWxpZCBvciBpbGxlZ2FsIHN0cmluZyB3YXMgc3BlY2lmaWVkXCJcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGlmICgvXFxzLy50ZXN0KHRva2VuKSkge1xuXHRcdFx0dGhyb3cgbmV3IERPTUV4KFxuXHRcdFx0XHQgIFwiSU5WQUxJRF9DSEFSQUNURVJfRVJSXCJcblx0XHRcdFx0LCBcIlN0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3RlclwiXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gYXJySW5kZXhPZi5jYWxsKGNsYXNzTGlzdCwgdG9rZW4pO1xuXHR9XG5cdCwgQ2xhc3NMaXN0ID0gZnVuY3Rpb24gKGVsZW0pIHtcblx0XHR2YXJcblx0XHRcdCAgdHJpbW1lZENsYXNzZXMgPSBzdHJUcmltLmNhbGwoZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiKVxuXHRcdFx0LCBjbGFzc2VzID0gdHJpbW1lZENsYXNzZXMgPyB0cmltbWVkQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pIDogW11cblx0XHRcdCwgaSA9IDBcblx0XHRcdCwgbGVuID0gY2xhc3Nlcy5sZW5ndGhcblx0XHQ7XG5cdFx0Zm9yICg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0dGhpcy5wdXNoKGNsYXNzZXNbaV0pO1xuXHRcdH1cblx0XHR0aGlzLl91cGRhdGVDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMudG9TdHJpbmcoKSk7XG5cdFx0fTtcblx0fVxuXHQsIGNsYXNzTGlzdFByb3RvID0gQ2xhc3NMaXN0W3Byb3RvUHJvcF0gPSBbXVxuXHQsIGNsYXNzTGlzdEdldHRlciA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gbmV3IENsYXNzTGlzdCh0aGlzKTtcblx0fVxuO1xuLy8gTW9zdCBET01FeGNlcHRpb24gaW1wbGVtZW50YXRpb25zIGRvbid0IGFsbG93IGNhbGxpbmcgRE9NRXhjZXB0aW9uJ3MgdG9TdHJpbmcoKVxuLy8gb24gbm9uLURPTUV4Y2VwdGlvbnMuIEVycm9yJ3MgdG9TdHJpbmcoKSBpcyBzdWZmaWNpZW50IGhlcmUuXG5ET01FeFtwcm90b1Byb3BdID0gRXJyb3JbcHJvdG9Qcm9wXTtcbmNsYXNzTGlzdFByb3RvLml0ZW0gPSBmdW5jdGlvbiAoaSkge1xuXHRyZXR1cm4gdGhpc1tpXSB8fCBudWxsO1xufTtcbmNsYXNzTGlzdFByb3RvLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRva2VuKSB7XG5cdHRva2VuICs9IFwiXCI7XG5cdHJldHVybiBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pICE9PSAtMTtcbn07XG5jbGFzc0xpc3RQcm90by5hZGQgPSBmdW5jdGlvbiAoKSB7XG5cdHZhclxuXHRcdCAgdG9rZW5zID0gYXJndW1lbnRzXG5cdFx0LCBpID0gMFxuXHRcdCwgbCA9IHRva2Vucy5sZW5ndGhcblx0XHQsIHRva2VuXG5cdFx0LCB1cGRhdGVkID0gZmFsc2Vcblx0O1xuXHRkbyB7XG5cdFx0dG9rZW4gPSB0b2tlbnNbaV0gKyBcIlwiO1xuXHRcdGlmIChjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pID09PSAtMSkge1xuXHRcdFx0dGhpcy5wdXNoKHRva2VuKTtcblx0XHRcdHVwZGF0ZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXHR3aGlsZSAoKytpIDwgbCk7XG5cblx0aWYgKHVwZGF0ZWQpIHtcblx0XHR0aGlzLl91cGRhdGVDbGFzc05hbWUoKTtcblx0fVxufTtcbmNsYXNzTGlzdFByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0dmFyXG5cdFx0ICB0b2tlbnMgPSBhcmd1bWVudHNcblx0XHQsIGkgPSAwXG5cdFx0LCBsID0gdG9rZW5zLmxlbmd0aFxuXHRcdCwgdG9rZW5cblx0XHQsIHVwZGF0ZWQgPSBmYWxzZVxuXHRcdCwgaW5kZXhcblx0O1xuXHRkbyB7XG5cdFx0dG9rZW4gPSB0b2tlbnNbaV0gKyBcIlwiO1xuXHRcdGluZGV4ID0gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKTtcblx0XHR3aGlsZSAoaW5kZXggIT09IC0xKSB7XG5cdFx0XHR0aGlzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHRcdGluZGV4ID0gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKTtcblx0XHR9XG5cdH1cblx0d2hpbGUgKCsraSA8IGwpO1xuXG5cdGlmICh1cGRhdGVkKSB7XG5cdFx0dGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG5cdH1cbn07XG5jbGFzc0xpc3RQcm90by50b2dnbGUgPSBmdW5jdGlvbiAodG9rZW4sIGZvcmNlKSB7XG5cdHRva2VuICs9IFwiXCI7XG5cblx0dmFyXG5cdFx0ICByZXN1bHQgPSB0aGlzLmNvbnRhaW5zKHRva2VuKVxuXHRcdCwgbWV0aG9kID0gcmVzdWx0ID9cblx0XHRcdGZvcmNlICE9PSB0cnVlICYmIFwicmVtb3ZlXCJcblx0XHQ6XG5cdFx0XHRmb3JjZSAhPT0gZmFsc2UgJiYgXCJhZGRcIlxuXHQ7XG5cblx0aWYgKG1ldGhvZCkge1xuXHRcdHRoaXNbbWV0aG9kXSh0b2tlbik7XG5cdH1cblxuXHRpZiAoZm9yY2UgPT09IHRydWUgfHwgZm9yY2UgPT09IGZhbHNlKSB7XG5cdFx0cmV0dXJuIGZvcmNlO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiAhcmVzdWx0O1xuXHR9XG59O1xuY2xhc3NMaXN0UHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLmpvaW4oXCIgXCIpO1xufTtcblxuaWYgKG9iakN0ci5kZWZpbmVQcm9wZXJ0eSkge1xuXHR2YXIgY2xhc3NMaXN0UHJvcERlc2MgPSB7XG5cdFx0ICBnZXQ6IGNsYXNzTGlzdEdldHRlclxuXHRcdCwgZW51bWVyYWJsZTogdHJ1ZVxuXHRcdCwgY29uZmlndXJhYmxlOiB0cnVlXG5cdH07XG5cdHRyeSB7XG5cdFx0b2JqQ3RyLmRlZmluZVByb3BlcnR5KGVsZW1DdHJQcm90bywgY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0UHJvcERlc2MpO1xuXHR9IGNhdGNoIChleCkgeyAvLyBJRSA4IGRvZXNuJ3Qgc3VwcG9ydCBlbnVtZXJhYmxlOnRydWVcblx0XHQvLyBhZGRpbmcgdW5kZWZpbmVkIHRvIGZpZ2h0IHRoaXMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvY2xhc3NMaXN0LmpzL2lzc3Vlcy8zNlxuXHRcdC8vIG1vZGVybmllIElFOC1NU1c3IG1hY2hpbmUgaGFzIElFOCA4LjAuNjAwMS4xODcwMiBhbmQgaXMgYWZmZWN0ZWRcblx0XHRpZiAoZXgubnVtYmVyID09PSB1bmRlZmluZWQgfHwgZXgubnVtYmVyID09PSAtMHg3RkY1RUM1NCkge1xuXHRcdFx0Y2xhc3NMaXN0UHJvcERlc2MuZW51bWVyYWJsZSA9IGZhbHNlO1xuXHRcdFx0b2JqQ3RyLmRlZmluZVByb3BlcnR5KGVsZW1DdHJQcm90bywgY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0UHJvcERlc2MpO1xuXHRcdH1cblx0fVxufSBlbHNlIGlmIChvYmpDdHJbcHJvdG9Qcm9wXS5fX2RlZmluZUdldHRlcl9fKSB7XG5cdGVsZW1DdHJQcm90by5fX2RlZmluZUdldHRlcl9fKGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdEdldHRlcik7XG59XG5cbn0od2luZG93LnNlbGYpKTtcblxufVxuXG4vLyBUaGVyZSBpcyBmdWxsIG9yIHBhcnRpYWwgbmF0aXZlIGNsYXNzTGlzdCBzdXBwb3J0LCBzbyBqdXN0IGNoZWNrIGlmIHdlIG5lZWRcbi8vIHRvIG5vcm1hbGl6ZSB0aGUgYWRkL3JlbW92ZSBhbmQgdG9nZ2xlIEFQSXMuXG5cbihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJfXCIpO1xuXG5cdHRlc3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjMVwiLCBcImMyXCIpO1xuXG5cdC8vIFBvbHlmaWxsIGZvciBJRSAxMC8xMSBhbmQgRmlyZWZveCA8MjYsIHdoZXJlIGNsYXNzTGlzdC5hZGQgYW5kXG5cdC8vIGNsYXNzTGlzdC5yZW1vdmUgZXhpc3QgYnV0IHN1cHBvcnQgb25seSBvbmUgYXJndW1lbnQgYXQgYSB0aW1lLlxuXHRpZiAoIXRlc3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImMyXCIpKSB7XG5cdFx0dmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZCkge1xuXHRcdFx0dmFyIG9yaWdpbmFsID0gRE9NVG9rZW5MaXN0LnByb3RvdHlwZVttZXRob2RdO1xuXG5cdFx0XHRET01Ub2tlbkxpc3QucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih0b2tlbikge1xuXHRcdFx0XHR2YXIgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0XHR0b2tlbiA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdFx0XHRvcmlnaW5hbC5jYWxsKHRoaXMsIHRva2VuKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9O1xuXHRcdGNyZWF0ZU1ldGhvZCgnYWRkJyk7XG5cdFx0Y3JlYXRlTWV0aG9kKCdyZW1vdmUnKTtcblx0fVxuXG5cdHRlc3RFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJjM1wiLCBmYWxzZSk7XG5cblx0Ly8gUG9seWZpbGwgZm9yIElFIDEwIGFuZCBGaXJlZm94IDwyNCwgd2hlcmUgY2xhc3NMaXN0LnRvZ2dsZSBkb2VzIG5vdFxuXHQvLyBzdXBwb3J0IHRoZSBzZWNvbmQgYXJndW1lbnQuXG5cdGlmICh0ZXN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJjM1wiKSkge1xuXHRcdHZhciBfdG9nZ2xlID0gRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU7XG5cblx0XHRET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uKHRva2VuLCBmb3JjZSkge1xuXHRcdFx0aWYgKDEgaW4gYXJndW1lbnRzICYmICF0aGlzLmNvbnRhaW5zKHRva2VuKSA9PT0gIWZvcmNlKSB7XG5cdFx0XHRcdHJldHVybiBmb3JjZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBfdG9nZ2xlLmNhbGwodGhpcywgdG9rZW4pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fVxuXG5cdHRlc3RFbGVtZW50ID0gbnVsbDtcbn0oKSk7XG5cbn1cbiIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LmFycmF5LmZpbmQnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5BcnJheS5maW5kOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5PYmplY3QuYXNzaWduOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM3LnJlZ2V4cC5lc2NhcGUnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5SZWdFeHAuZXNjYXBlOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZih0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuICByZXR1cm4gaXQ7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTsiLCIvLyAwIC0+IEFycmF5I2ZvckVhY2hcbi8vIDEgLT4gQXJyYXkjbWFwXG4vLyAyIC0+IEFycmF5I2ZpbHRlclxuLy8gMyAtPiBBcnJheSNzb21lXG4vLyA0IC0+IEFycmF5I2V2ZXJ5XG4vLyA1IC0+IEFycmF5I2ZpbmRcbi8vIDYgLT4gQXJyYXkjZmluZEluZGV4XG52YXIgY3R4ICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBJT2JqZWN0ICA9IHJlcXVpcmUoJy4vJC5pb2JqZWN0JylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vJC50by1vYmplY3QnKVxuICAsIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi8kLnRvLWxlbmd0aCcpXG4gICwgYXNjICAgICAgPSByZXF1aXJlKCcuLyQuYXJyYXktc3BlY2llcy1jcmVhdGUnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVFlQRSl7XG4gIHZhciBJU19NQVAgICAgICAgID0gVFlQRSA9PSAxXG4gICAgLCBJU19GSUxURVIgICAgID0gVFlQRSA9PSAyXG4gICAgLCBJU19TT01FICAgICAgID0gVFlQRSA9PSAzXG4gICAgLCBJU19FVkVSWSAgICAgID0gVFlQRSA9PSA0XG4gICAgLCBJU19GSU5EX0lOREVYID0gVFlQRSA9PSA2XG4gICAgLCBOT19IT0xFUyAgICAgID0gVFlQRSA9PSA1IHx8IElTX0ZJTkRfSU5ERVg7XG4gIHJldHVybiBmdW5jdGlvbigkdGhpcywgY2FsbGJhY2tmbiwgdGhhdCl7XG4gICAgdmFyIE8gICAgICA9IHRvT2JqZWN0KCR0aGlzKVxuICAgICAgLCBzZWxmICAgPSBJT2JqZWN0KE8pXG4gICAgICAsIGYgICAgICA9IGN0eChjYWxsYmFja2ZuLCB0aGF0LCAzKVxuICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChzZWxmLmxlbmd0aClcbiAgICAgICwgaW5kZXggID0gMFxuICAgICAgLCByZXN1bHQgPSBJU19NQVAgPyBhc2MoJHRoaXMsIGxlbmd0aCkgOiBJU19GSUxURVIgPyBhc2MoJHRoaXMsIDApIDogdW5kZWZpbmVkXG4gICAgICAsIHZhbCwgcmVzO1xuICAgIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoTk9fSE9MRVMgfHwgaW5kZXggaW4gc2VsZil7XG4gICAgICB2YWwgPSBzZWxmW2luZGV4XTtcbiAgICAgIHJlcyA9IGYodmFsLCBpbmRleCwgTyk7XG4gICAgICBpZihUWVBFKXtcbiAgICAgICAgaWYoSVNfTUFQKXJlc3VsdFtpbmRleF0gPSByZXM7ICAgICAgICAgICAgLy8gbWFwXG4gICAgICAgIGVsc2UgaWYocmVzKXN3aXRjaChUWVBFKXtcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAgICAgICAgLy8gc29tZVxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuIHZhbDsgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kXG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4gaW5kZXg7ICAgICAgICAgICAgICAgICAgIC8vIGZpbmRJbmRleFxuICAgICAgICAgIGNhc2UgMjogcmVzdWx0LnB1c2godmFsKTsgICAgICAgICAgICAgICAvLyBmaWx0ZXJcbiAgICAgICAgfSBlbHNlIGlmKElTX0VWRVJZKXJldHVybiBmYWxzZTsgICAgICAgICAgLy8gZXZlcnlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIElTX0ZJTkRfSU5ERVggPyAtMSA6IElTX1NPTUUgfHwgSVNfRVZFUlkgPyBJU19FVkVSWSA6IHJlc3VsdDtcbiAgfTtcbn07IiwiLy8gOS40LjIuMyBBcnJheVNwZWNpZXNDcmVhdGUob3JpZ2luYWxBcnJheSwgbGVuZ3RoKVxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpXG4gICwgaXNBcnJheSAgPSByZXF1aXJlKCcuLyQuaXMtYXJyYXknKVxuICAsIFNQRUNJRVMgID0gcmVxdWlyZSgnLi8kLndrcycpKCdzcGVjaWVzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9yaWdpbmFsLCBsZW5ndGgpe1xuICB2YXIgQztcbiAgaWYoaXNBcnJheShvcmlnaW5hbCkpe1xuICAgIEMgPSBvcmlnaW5hbC5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjcm9zcy1yZWFsbSBmYWxsYmFja1xuICAgIGlmKHR5cGVvZiBDID09ICdmdW5jdGlvbicgJiYgKEMgPT09IEFycmF5IHx8IGlzQXJyYXkoQy5wcm90b3R5cGUpKSlDID0gdW5kZWZpbmVkO1xuICAgIGlmKGlzT2JqZWN0KEMpKXtcbiAgICAgIEMgPSBDW1NQRUNJRVNdO1xuICAgICAgaWYoQyA9PT0gbnVsbClDID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSByZXR1cm4gbmV3IChDID09PSB1bmRlZmluZWQgPyBBcnJheSA6IEMpKGxlbmd0aCk7XG59OyIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07IiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMS4yLjYnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZiIsIi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vJC5hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuO1xuICBzd2l0Y2gobGVuZ3RoKXtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59OyIsIi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTsiLCJ2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi8kLmNvcmUnKVxuICAsIGN0eCAgICAgICA9IHJlcXVpcmUoJy4vJC5jdHgnKVxuICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xuXG52YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GXG4gICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG4gICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TXG4gICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QXG4gICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG4gICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XXG4gICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KVxuICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuICAgICwga2V5LCBvd24sIG91dDtcbiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG4gIGZvcihrZXkgaW4gc291cmNlKXtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiBrZXkgaW4gdGFyZ2V0O1xuICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07XG4gICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzXG4gICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpXG4gICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcbiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpe1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbihwYXJhbSl7XG4gICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgQyA/IG5ldyBDKHBhcmFtKSA6IEMocGFyYW0pO1xuICAgICAgfTtcbiAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTtcbiAgICAgIHJldHVybiBGO1xuICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kc1xuICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICBpZihJU19QUk9UTykoZXhwb3J0c1tQUk9UT1RZUEVdIHx8IChleHBvcnRzW1BST1RPVFlQRV0gPSB7fSkpW2tleV0gPSBvdXQ7XG4gIH1cbn07XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgIC8vIGZvcmNlZFxuJGV4cG9ydC5HID0gMjsgIC8vIGdsb2JhbFxuJGV4cG9ydC5TID0gNDsgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgIC8vIHByb3RvXG4kZXhwb3J0LkIgPSAxNjsgLy8gYmluZFxuJGV4cG9ydC5XID0gMzI7IC8vIHdyYXBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTsiLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuLyQuY29mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7XG59OyIsIi8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpXG52YXIgY29mID0gcmVxdWlyZSgnLi8kLmNvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKGFyZyl7XG4gIHJldHVybiBjb2YoYXJnKSA9PSAnQXJyYXknO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJztcbn07IiwidmFyICRPYmplY3QgPSBPYmplY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlOiAgICAgJE9iamVjdC5jcmVhdGUsXG4gIGdldFByb3RvOiAgICRPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gIGlzRW51bTogICAgIHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLFxuICBnZXREZXNjOiAgICAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgc2V0RGVzYzogICAgJE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgc2V0RGVzY3M6ICAgJE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLFxuICBnZXRLZXlzOiAgICAkT2JqZWN0LmtleXMsXG4gIGdldE5hbWVzOiAgICRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgZ2V0U3ltYm9sczogJE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsXG4gIGVhY2g6ICAgICAgIFtdLmZvckVhY2hcbn07IiwiLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKVxudmFyICQgICAgICAgID0gcmVxdWlyZSgnLi8kJylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vJC50by1vYmplY3QnKVxuICAsIElPYmplY3QgID0gcmVxdWlyZSgnLi8kLmlvYmplY3QnKTtcblxuLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHZhciBhID0gT2JqZWN0LmFzc2lnblxuICAgICwgQSA9IHt9XG4gICAgLCBCID0ge31cbiAgICAsIFMgPSBTeW1ib2woKVxuICAgICwgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7XG4gIEFbU10gPSA3O1xuICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7XG4gIHJldHVybiBhKHt9LCBBKVtTXSAhPSA3IHx8IE9iamVjdC5rZXlzKGEoe30sIEIpKS5qb2luKCcnKSAhPSBLO1xufSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldClcbiAgICAsICQkICAgID0gYXJndW1lbnRzXG4gICAgLCAkJGxlbiA9ICQkLmxlbmd0aFxuICAgICwgaW5kZXggPSAxXG4gICAgLCBnZXRLZXlzICAgID0gJC5nZXRLZXlzXG4gICAgLCBnZXRTeW1ib2xzID0gJC5nZXRTeW1ib2xzXG4gICAgLCBpc0VudW0gICAgID0gJC5pc0VudW07XG4gIHdoaWxlKCQkbGVuID4gaW5kZXgpe1xuICAgIHZhciBTICAgICAgPSBJT2JqZWN0KCQkW2luZGV4KytdKVxuICAgICAgLCBrZXlzICAgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpXG4gICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgICAsIGogICAgICA9IDBcbiAgICAgICwga2V5O1xuICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07XG4gIH1cbiAgcmV0dXJuIFQ7XG59IDogT2JqZWN0LmFzc2lnbjsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHJlZ0V4cCwgcmVwbGFjZSl7XG4gIHZhciByZXBsYWNlciA9IHJlcGxhY2UgPT09IE9iamVjdChyZXBsYWNlKSA/IGZ1bmN0aW9uKHBhcnQpe1xuICAgIHJldHVybiByZXBsYWNlW3BhcnRdO1xuICB9IDogcmVwbGFjZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKGl0KXtcbiAgICByZXR1cm4gU3RyaW5nKGl0KS5yZXBsYWNlKHJlZ0V4cCwgcmVwbGFjZXIpO1xuICB9O1xufTsiLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXydcbiAgLCBzdG9yZSAgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pO1xufTsiLCIvLyA3LjEuNCBUb0ludGVnZXJcbnZhciBjZWlsICA9IE1hdGguY2VpbFxuICAsIGZsb29yID0gTWF0aC5mbG9vcjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcbn07IiwiLy8gNy4xLjE1IFRvTGVuZ3RoXG52YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi8kLnRvLWludGVnZXInKVxuICAsIG1pbiAgICAgICA9IE1hdGgubWluO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxXG59OyIsIi8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudClcbnZhciBkZWZpbmVkID0gcmVxdWlyZSgnLi8kLmRlZmluZWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07IiwidmFyIGlkID0gMFxuICAsIHB4ID0gTWF0aC5yYW5kb20oKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTtcbn07IiwidmFyIHN0b3JlICA9IHJlcXVpcmUoJy4vJC5zaGFyZWQnKSgnd2tzJylcbiAgLCB1aWQgICAgPSByZXF1aXJlKCcuLyQudWlkJylcbiAgLCBTeW1ib2wgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJykuU3ltYm9sO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG4gICAgU3ltYm9sICYmIFN5bWJvbFtuYW1lXSB8fCAoU3ltYm9sIHx8IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpO1xufTsiLCIndXNlIHN0cmljdCc7XG4vLyAyMi4xLjMuOCBBcnJheS5wcm90b3R5cGUuZmluZChwcmVkaWNhdGUsIHRoaXNBcmcgPSB1bmRlZmluZWQpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKVxuICAsICRmaW5kICAgPSByZXF1aXJlKCcuLyQuYXJyYXktbWV0aG9kcycpKDUpXG4gICwgS0VZICAgICA9ICdmaW5kJ1xuICAsIGZvcmNlZCAgPSB0cnVlO1xuLy8gU2hvdWxkbid0IHNraXAgaG9sZXNcbmlmKEtFWSBpbiBbXSlBcnJheSgxKVtLRVldKGZ1bmN0aW9uKCl7IGZvcmNlZCA9IGZhbHNlOyB9KTtcbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZm9yY2VkLCAnQXJyYXknLCB7XG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY2FsbGJhY2tmbi8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcbiAgICByZXR1cm4gJGZpbmQodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcbnJlcXVpcmUoJy4vJC5hZGQtdG8tdW5zY29wYWJsZXMnKShLRVkpOyIsIi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiByZXF1aXJlKCcuLyQub2JqZWN0LWFzc2lnbicpfSk7IiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCAkcmUgICAgID0gcmVxdWlyZSgnLi8kLnJlcGxhY2VyJykoL1tcXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVnRXhwJywge2VzY2FwZTogZnVuY3Rpb24gZXNjYXBlKGl0KXsgcmV0dXJuICRyZShpdCk7IH19KTtcbiIsIi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICogYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICogTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gKiBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLiBUaGUgZnVuY3Rpb24gYWxzbyBoYXMgYSBwcm9wZXJ0eSAnY2xlYXInIFxuICogdGhhdCBpcyBhIGZ1bmN0aW9uIHdoaWNoIHdpbGwgY2xlYXIgdGhlIHRpbWVyIHRvIHByZXZlbnQgcHJldmlvdXNseSBzY2hlZHVsZWQgZXhlY3V0aW9ucy4gXG4gKlxuICogQHNvdXJjZSB1bmRlcnNjb3JlLmpzXG4gKiBAc2VlIGh0dHA6Ly91bnNjcmlwdGFibGUuY29tLzIwMDkvMDMvMjAvZGVib3VuY2luZy1qYXZhc2NyaXB0LW1ldGhvZHMvXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbiB0byB3cmFwXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dCBpbiBtcyAoYDEwMGApXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdoZXRoZXIgdG8gZXhlY3V0ZSBhdCB0aGUgYmVnaW5uaW5nIChgZmFsc2VgKVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSl7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgaWYgKG51bGwgPT0gd2FpdCkgd2FpdCA9IDEwMDtcblxuICBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGRlYm91bmNlZCA9IGZ1bmN0aW9uKCl7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZGVib3VuY2VkLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgXG4gIGRlYm91bmNlZC5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRlYm91bmNlZDtcbn07XG4iLCIoZnVuY3Rpb24gKEVMRU1FTlQpIHtcblx0RUxFTUVOVC5tYXRjaGVzID0gRUxFTUVOVC5tYXRjaGVzIHx8IEVMRU1FTlQubW96TWF0Y2hlc1NlbGVjdG9yIHx8IEVMRU1FTlQubXNNYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC5vTWF0Y2hlc1NlbGVjdG9yIHx8IEVMRU1FTlQud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuXG5cdEVMRU1FTlQuY2xvc2VzdCA9IEVMRU1FTlQuY2xvc2VzdCB8fCBmdW5jdGlvbiBjbG9zZXN0KHNlbGVjdG9yKSB7XG5cdFx0dmFyIGVsZW1lbnQgPSB0aGlzO1xuXG5cdFx0d2hpbGUgKGVsZW1lbnQpIHtcblx0XHRcdGlmIChlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtZW50O1xuXHR9O1xufShFbGVtZW50LnByb3RvdHlwZSkpO1xuIiwidmFyIFBhcnNlciA9IHJlcXVpcmUoJy4vbGliL3BhcnNlcicpXG4gICwgUmVzb3VyY2UgPSByZXF1aXJlKCcuL2xpYi9yZXNvdXJjZScpXG4gICwgdmFsaWRhdGlvbkZsYWcgPSBmYWxzZTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgcGFyc2U6IGZ1bmN0aW9uKHVucGFyc2VkKSB7XG4gICAgcmV0dXJuIG5ldyBQYXJzZXIoKS5wYXJzZSh1bnBhcnNlZCwgdmFsaWRhdGlvbkZsYWcpO1xuICB9LFxuXG4gIGVuYWJsZVZhbGlkYXRpb246IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICB2YWxpZGF0aW9uRmxhZyA9IChmbGFnICE9IG51bGwpID8gZmxhZyA6IHRydWU7XG4gIH0sXG5cbiAgZGlzYWJsZVZhbGlkYXRpb246IGZ1bmN0aW9uKCkge1xuICAgIHZhbGlkYXRpb25GbGFnID0gZmFsc2U7XG4gIH0sXG5cbiAgUmVzb3VyY2U6IFJlc291cmNlXG5cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qXG4gKiBBIHZlcnkgbmFpdmUgY29weS1vbi13cml0ZSBpbW11dGFibGUgc3RhY2suIFNpbmNlIHRoZSBzaXplIG9mIHRoZSBzdGFja1xuICogaXMgZXF1YWwgdG8gdGhlIGRlcHRoIG9mIHRoZSBlbWJlZGRlZCByZXNvdXJjZXMgZm9yIG9uZSBIQUwgcmVzb3VyY2UsIHRoZSBiYWRcbiAqIHBlcmZvcm1hbmNlIGZvciB0aGUgY29weS1vbi13cml0ZSBhcHByb2FjaCBpcyBwcm9iYWJseSBub3QgYSBwcm9ibGVtIGF0IGFsbC5cbiAqIE1pZ2h0IGJlIHJlcGxhY2VkIGJ5IGEgc21hcnRlciBzb2x1dGlvbiBsYXRlci4gT3Igbm90LiBXaGF0ZXZlci5cbiAqL1xuZnVuY3Rpb24gSW1tdXRhYmxlU3RhY2soKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDEpIHtcbiAgICB0aGlzLl9hcnJheSA9IGFyZ3VtZW50c1swXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9hcnJheSA9IFtdO1xuICB9XG59XG5cbkltbXV0YWJsZVN0YWNrLnByb3RvdHlwZS5hcnJheSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fYXJyYXk7XG59O1xuXG5JbW11dGFibGVTdGFjay5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gIHJldHVybiB0aGlzLl9hcnJheS5sZW5ndGggPT09IDA7XG59O1xuXG5JbW11dGFibGVTdGFjay5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgdmFyIGFycmF5ID0gdGhpcy5fYXJyYXkuc2xpY2UoMCk7XG4gIGFycmF5LnB1c2goZWxlbWVudCk7XG4gIHJldHVybiBuZXcgSW1tdXRhYmxlU3RhY2soYXJyYXkpO1xufTtcblxuSW1tdXRhYmxlU3RhY2sucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXJyYXkgPSB0aGlzLl9hcnJheS5zbGljZSgwLCB0aGlzLl9hcnJheS5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIG5ldyBJbW11dGFibGVTdGFjayhhcnJheSk7XG59O1xuXG5JbW11dGFibGVTdGFjay5wcm90b3R5cGUucGVlayA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5pc0VtcHR5KCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhblxcJ3QgcGVlayBvbiBlbXB0eSBzdGFjaycpO1xuICB9XG4gIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9hcnJheS5sZW5ndGggLSAxXTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW1tdXRhYmxlU3RhY2s7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZXNvdXJjZSA9IHJlcXVpcmUoJy4vcmVzb3VyY2UnKVxuICAsIFN0YWNrID0gcmVxdWlyZSgnLi9pbW11dGFibGVfc3RhY2snKTtcblxudmFyIGxpbmtTcGVjID0ge1xuICBocmVmOiB7IHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0VmFsdWU6IG51bGwgfSxcbiAgdGVtcGxhdGVkOiB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdFZhbHVlOiBmYWxzZSB9LFxuICB0eXBlOiB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdFZhbHVlOiBudWxsIH0sXG4gIGRlcHJlY2F0aW9uOiB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdFZhbHVlOiBudWxsIH0sXG4gIG5hbWU6IHsgcmVxdWlyZWQ6IGZhbHNlLCBkZWZhdWx0VmFsdWU6IG51bGwgfSxcbiAgcHJvZmlsZTogeyByZXF1aXJlZDogZmFsc2UsIGRlZmF1bHRWYWx1ZTogbnVsbCB9LFxuICB0aXRsZTogeyByZXF1aXJlZDogZmFsc2UsIGRlZmF1bHRWYWx1ZTogbnVsbCB9LFxuICBocmVmbGFuZzogeyByZXF1aXJlZDogZmFsc2UsIGRlZmF1bHRWYWx1ZTogbnVsbCB9XG59O1xuXG5mdW5jdGlvbiBQYXJzZXIoKSB7XG59XG5cblBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZSh1bnBhcnNlZCwgdmFsaWRhdGlvbkZsYWcpIHtcbiAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uRmxhZyA/IFtdIDogbnVsbDtcbiAgcmV0dXJuIF9wYXJzZSh1bnBhcnNlZCwgdmFsaWRhdGlvbiwgbmV3IFN0YWNrKCkpO1xufTtcblxuZnVuY3Rpb24gX3BhcnNlKHVucGFyc2VkLCB2YWxpZGF0aW9uLCBwYXRoKSB7XG4gIGlmICh1bnBhcnNlZCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHVucGFyc2VkO1xuICB9XG4gIHZhciBhbGxMaW5rQXJyYXlzID0gcGFyc2VMaW5rcyh1bnBhcnNlZC5fbGlua3MsIHZhbGlkYXRpb24sXG4gICAgICBwYXRoLnB1c2goJ19saW5rcycpKTtcbiAgdmFyIGN1cmllcyA9IHBhcnNlQ3VyaWVzKGFsbExpbmtBcnJheXMpO1xuICB2YXIgYWxsRW1iZWRkZWRBcnJheXMgPSBwYXJzZUVtYmVkZGVkUmVzb3VyY2Vzcyh1bnBhcnNlZC5fZW1iZWRkZWQsXG4gICAgICB2YWxpZGF0aW9uLCBwYXRoLnB1c2goJ19lbWJlZGRlZCcpKTtcbiAgdmFyIHJlc291cmNlID0gbmV3IFJlc291cmNlKGFsbExpbmtBcnJheXMsIGN1cmllcywgYWxsRW1iZWRkZWRBcnJheXMsXG4gICAgICB2YWxpZGF0aW9uKTtcbiAgY29weU5vbkhhbFByb3BlcnRpZXModW5wYXJzZWQsIHJlc291cmNlKTtcbiAgcmVzb3VyY2UuX29yaWdpbmFsID0gdW5wYXJzZWQ7XG4gIHJldHVybiByZXNvdXJjZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VMaW5rcyhsaW5rcywgdmFsaWRhdGlvbiwgcGF0aCkge1xuICBsaW5rcyA9IHBhcnNlSGFsUHJvcGVydHkobGlua3MsIHBhcnNlTGluaywgdmFsaWRhdGlvbiwgcGF0aCk7XG4gIGlmIChsaW5rcyA9PSBudWxsIHx8IGxpbmtzLnNlbGYgPT0gbnVsbCkge1xuICAgIC8vIE5vIGxpbmtzIGF0IGFsbD8gVGhlbiBpdCBpbXBsaWN0bHkgbWlzc2VzIHRoZSBzZWxmIGxpbmsgd2hpY2ggaXQgU0hPVUxEXG4gICAgLy8gaGF2ZSBhY2NvcmRpbmcgdG8gc3BlY1xuICAgIHJlcG9ydFZhbGlkYXRpb25Jc3N1ZSgnUmVzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIHNlbGYgbGluaycsIHZhbGlkYXRpb24sXG4gICAgICAgIHBhdGgpO1xuICB9XG4gIHJldHVybiBsaW5rcztcbn1cblxuZnVuY3Rpb24gcGFyc2VDdXJpZXMobGlua0FycmF5cykge1xuICBpZiAobGlua0FycmF5cykge1xuICAgIHJldHVybiBsaW5rQXJyYXlzLmN1cmllcztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VFbWJlZGRlZFJlc291cmNlc3Mob3JpZ2luYWwsIHBhcmVudFZhbGlkYXRpb24sIHBhdGgpIHtcbiAgdmFyIGVtYmVkZGVkID0gcGFyc2VIYWxQcm9wZXJ0eShvcmlnaW5hbCwgaWRlbnRpdHksIHBhcmVudFZhbGlkYXRpb24sIHBhdGgpO1xuICBpZiAoZW1iZWRkZWQgPT0gbnVsbCkge1xuICAgIHJldHVybiBlbWJlZGRlZDtcbiAgfVxuICBPYmplY3Qua2V5cyhlbWJlZGRlZCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBlbWJlZGRlZFtrZXldID0gZW1iZWRkZWRba2V5XS5tYXAoZnVuY3Rpb24oZW1iZWRkZWRFbGVtZW50KSB7XG4gICAgICB2YXIgY2hpbGRWYWxpZGF0aW9uID0gcGFyZW50VmFsaWRhdGlvbiAhPSBudWxsID8gW10gOiBudWxsO1xuICAgICAgdmFyIGVtYmVkZGVkUmVzb3VyY2UgPSBfcGFyc2UoZW1iZWRkZWRFbGVtZW50LCBjaGlsZFZhbGlkYXRpb24sXG4gICAgICAgICAgcGF0aC5wdXNoKGtleSkpO1xuICAgICAgZW1iZWRkZWRSZXNvdXJjZS5fb3JpZ2luYWwgPSBlbWJlZGRlZEVsZW1lbnQ7XG4gICAgICByZXR1cm4gZW1iZWRkZWRSZXNvdXJjZTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBlbWJlZGRlZDtcbn1cblxuLypcbiAqIENvcHkgb3ZlciBub24taGFsIHByb3BlcnRpZXMgKGV2ZXJ5dGhpbmcgdGhhdCBpcyBub3QgX2xpbmtzIG9yIF9lbWJlZGRlZClcbiAqIHRvIHRoZSBwYXJzZWQgcmVzb3VyY2UuXG4gKi9cbmZ1bmN0aW9uIGNvcHlOb25IYWxQcm9wZXJ0aWVzKHVucGFyc2VkLCByZXNvdXJjZSkge1xuICBPYmplY3Qua2V5cyh1bnBhcnNlZCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoa2V5ICE9PSAnX2xpbmtzJyAmJiBrZXkgIT09ICdfZW1iZWRkZWQnKSB7XG4gICAgICByZXNvdXJjZVtrZXldID0gdW5wYXJzZWRba2V5XTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKlxuICogUHJvY2Vzc2VzIG9uZSBvZiB0aGUgdHdvIG1haW4gaGFsIHByb3BlcnRpZXMsIHRoYXQgaXMgX2xpbmtzIG9yIF9lbWJlZGRlZC5cbiAqIEVhY2ggc3ViLXByb3BlcnR5IGlzIHR1cm5lZCBpbnRvIGEgc2luZ2xlIGVsZW1lbnQgYXJyYXkgaWYgaXQgaXNuJ3QgYWxyZWFkeVxuICogYW4gYXJyYXkuIHByb2Nlc3NpbmdGdW5jdGlvbiBpcyBhcHBsaWVkIHRvIGVhY2ggYXJyYXkgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VIYWxQcm9wZXJ0eShwcm9wZXJ0eSwgcHJvY2Vzc2luZ0Z1bmN0aW9uLCB2YWxpZGF0aW9uLCBwYXRoKSB7XG4gIGlmIChwcm9wZXJ0eSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHByb3BlcnR5O1xuICB9XG5cbiAgLy8gY3JlYXRlIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBfbGlua3MvX2VtYmVkZGVkIG9iamVjdFxuICB2YXIgY29weSA9IHt9O1xuXG4gIC8vIG5vcm1hbGl6ZSBlYWNoIGxpbmsvZWFjaCBlbWJlZGRlZCBvYmplY3QgYW5kIHB1dCBpdCBpbnRvIG91ciBjb3B5XG4gIE9iamVjdC5rZXlzKHByb3BlcnR5KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGNvcHlba2V5XSA9IGFycmF5Znkoa2V5LCBwcm9wZXJ0eVtrZXldLCBwcm9jZXNzaW5nRnVuY3Rpb24sXG4gICAgICAgIHZhbGlkYXRpb24sIHBhdGgpO1xuICB9KTtcbiAgcmV0dXJuIGNvcHk7XG59XG5cbmZ1bmN0aW9uIGFycmF5Znkoa2V5LCBvYmplY3QsIGZuLCB2YWxpZGF0aW9uLCBwYXRoKSB7XG4gIGlmIChpc0FycmF5KG9iamVjdCkpIHtcbiAgICByZXR1cm4gb2JqZWN0Lm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICByZXR1cm4gZm4oa2V5LCBlbGVtZW50LCB2YWxpZGF0aW9uLCBwYXRoKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW2ZuKGtleSwgb2JqZWN0LCB2YWxpZGF0aW9uLCBwYXRoKV07XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBwYXJzZUxpbmsobGlua0tleSwgbGluaywgdmFsaWRhdGlvbiwgcGF0aCkge1xuICBpZiAoIWlzT2JqZWN0KGxpbmspKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdMaW5rIG9iamVjdCBpcyBub3QgYW4gYWN0dWFsIG9iamVjdDogJyArIGxpbmsgK1xuICAgICAgJyBbJyArIHR5cGVvZiBsaW5rICsgJ10nKTtcbiAgfVxuXG4gIC8vIGNyZWF0ZSBhIHNoYWxsb3cgY29weSBvZiB0aGUgbGluayBvYmplY3RcbiAgdmFyIGNvcHkgPSBzaGFsbG93Q29weShsaW5rKTtcblxuICAvLyBhZGQgbWlzc2luZyBwcm9wZXJ0aWVzIG1hbmRhdGVkIGJ5IHNwZWMgYW5kIGRvIGdlbmVyaWMgdmFsaWRhdGlvblxuICBPYmplY3Qua2V5cyhsaW5rU3BlYykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoY29weVtrZXldID09IG51bGwpIHtcbiAgICAgIGlmIChsaW5rU3BlY1trZXldLnJlcXVpcmVkKSB7XG4gICAgICAgIHJlcG9ydFZhbGlkYXRpb25Jc3N1ZSgnTGluayBtaXNzZXMgcmVxdWlyZWQgcHJvcGVydHkgJyArIGtleSArICcuJyxcbiAgICAgICAgICAgIHZhbGlkYXRpb24sIHBhdGgucHVzaChsaW5rS2V5KSk7XG4gICAgICB9XG4gICAgICBpZiAobGlua1NwZWNba2V5XS5kZWZhdWx0VmFsdWUgIT0gbnVsbCkge1xuICAgICAgICBjb3B5W2tleV0gPSBsaW5rU3BlY1trZXldLmRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIGNoZWNrIG1vcmUgaW50ZXItcHJvcGVydHkgcmVsYXRpb25zIG1hbmRhdGVkIGJ5IHNwZWNcbiAgaWYgKGNvcHkuZGVwcmVjYXRpb24pIHtcbiAgICBsb2coJ1dhcm5pbmc6IExpbmsgJyArIHBhdGhUb1N0cmluZyhwYXRoLnB1c2gobGlua0tleSkpICtcbiAgICAgICAgJyBpcyBkZXByZWNhdGVkLCBzZWUgJyArIGNvcHkuZGVwcmVjYXRpb24pO1xuICB9XG4gIGlmIChjb3B5LnRlbXBsYXRlZCAhPT0gdHJ1ZSAmJiBjb3B5LnRlbXBsYXRlZCAhPT0gZmFsc2UpIHtcbiAgICBjb3B5LnRlbXBsYXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cbiAgaWYgKGNvcHkuaHJlZiAmJiBjb3B5LmhyZWYuaW5kZXhPZigneycpID49IDAgJiYgIWNvcHkudGVtcGxhdGVkKSB7XG4gICAgcmVwb3J0VmFsaWRhdGlvbklzc3VlKCdMaW5rIHNlZW1zIHRvIGJlIGFuIFVSSSB0ZW1wbGF0ZSAnICtcbiAgICAgICAgJ2J1dCBpdHMgXCJ0ZW1wbGF0ZWRcIiBwcm9wZXJ0eSBpcyBub3Qgc2V0IHRvIHRydWUuJywgdmFsaWRhdGlvbixcbiAgICAgICAgcGF0aC5wdXNoKGxpbmtLZXkpKTtcbiAgfVxuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gaXNBcnJheShvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnb2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gaWRlbnRpdHkoa2V5LCBvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gcmVwb3J0VmFsaWRhdGlvbklzc3VlKG1lc3NhZ2UsIHZhbGlkYXRpb24sIHBhdGgpIHtcbiAgaWYgKHZhbGlkYXRpb24pIHtcbiAgICB2YWxpZGF0aW9uLnB1c2goe1xuICAgICAgcGF0aDogcGF0aFRvU3RyaW5nKHBhdGgpLFxuICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgIH0pO1xuICB9XG59XG5cbi8vIFRPRE8gZml4IHRoaXMgYWQgaG9jIG1lc3MgLSBkb2VzIGllIHN1cHBvcnQgY29uc29sZS5sb2cgYXMgb2YgaWU5P1xuZnVuY3Rpb24gbG9nKG1lc3NhZ2UpIHtcbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaGFsbG93Q29weShzb3VyY2UpIHtcbiAgdmFyIGNvcHkgPSB7fTtcbiAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGNvcHlba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9KTtcbiAgcmV0dXJuIGNvcHk7XG59XG5cbmZ1bmN0aW9uIHBhdGhUb1N0cmluZyhwYXRoKSB7XG4gIHZhciBzID0gJyQuJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmFycmF5KCkubGVuZ3RoOyBpKyspIHtcbiAgICBzICs9IHBhdGguYXJyYXkoKVtpXSArICcuJztcbiAgfVxuICBzID0gcy5zdWJzdHJpbmcoMCwgcy5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIHM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUGFyc2VyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBSZXNvdXJjZShsaW5rcywgY3VyaWVzLCBlbWJlZGRlZCwgdmFsaWRhdGlvbklzc3Vlcykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX2xpbmtzID0gbGlua3MgfHwge307XG4gIHRoaXMuX2luaXRDdXJpZXMoY3VyaWVzKTtcbiAgdGhpcy5fZW1iZWRkZWQgPSBlbWJlZGRlZCB8fCB7fTtcbiAgdGhpcy5fdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25Jc3N1ZXMgfHwgW107XG59XG5cblJlc291cmNlLnByb3RvdHlwZS5faW5pdEN1cmllcyA9IGZ1bmN0aW9uKGN1cmllcykge1xuICB0aGlzLl9jdXJpZXNNYXAgPSB7fTtcbiAgaWYgKCFjdXJpZXMpIHtcbiAgICB0aGlzLl9jdXJpZXMgPSBbXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9jdXJpZXMgPSBjdXJpZXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jdXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXJpZSA9IHRoaXMuX2N1cmllc1tpXTtcbiAgICAgIHRoaXMuX2N1cmllc01hcFtjdXJpZS5uYW1lXSA9IGN1cmllO1xuICAgIH1cbiAgfVxuICB0aGlzLl9wcmVSZXNvbHZlQ3VyaWVzKCk7XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuX3ByZVJlc29sdmVDdXJpZXMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fcmVzb2x2ZWRDdXJpZXNNYXAgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jdXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY3VyaWUgPSB0aGlzLl9jdXJpZXNbaV07XG4gICAgaWYgKCFjdXJpZS5uYW1lKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZm9yICh2YXIgcmVsIGluIHRoaXMuX2xpbmtzKSB7XG4gICAgICBpZiAocmVsICE9PSAnY3VyaWVzJykge1xuICAgICAgICB0aGlzLl9wcmVSZXNvbHZlQ3VyaWUoY3VyaWUsIHJlbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuX3ByZVJlc29sdmVDdXJpZSA9IGZ1bmN0aW9uKGN1cmllLCByZWwpIHtcbiAgdmFyIGxpbmsgPSB0aGlzLl9saW5rc1tyZWxdO1xuICB2YXIgcHJlZml4QW5kUmVmZXJlbmNlID0gcmVsLnNwbGl0KC86KC4rKS8pO1xuICB2YXIgY2FuZGlkYXRlID0gcHJlZml4QW5kUmVmZXJlbmNlWzBdO1xuICBpZiAoY3VyaWUubmFtZSA9PT0gY2FuZGlkYXRlKSB7XG4gICAgaWYgKGN1cmllLnRlbXBsYXRlZCAmJiBwcmVmaXhBbmRSZWZlcmVuY2UubGVuZ3RoID49IDEpIHtcbiAgICAgIC8vIFRPRE8gcmVzb2x2aW5nIHRlbXBsYXRlZCBDVVJJRVMgc2hvdWxkIHVzZSBhIHNtYWxsIHVyaSB0ZW1wbGF0ZVxuICAgICAgLy8gbGliLCBub3QgY29kZWQgaGVyZSBhZCBob2NcbiAgICAgIHZhciBocmVmID0gY3VyaWUuaHJlZi5yZXBsYWNlKC8oLiopeyguKil9KC4qKS8sICckMScgK1xuICAgICAgICAgIHByZWZpeEFuZFJlZmVyZW5jZVsxXSArICckMycpO1xuICAgICAgdGhpcy5fcmVzb2x2ZWRDdXJpZXNNYXBbaHJlZl0gPSByZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc29sdmVkQ3VyaWVzTWFwW2N1cmllLmhyZWZdID0gcmVsO1xuICAgIH1cbiAgfVxufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLmFsbExpbmtBcnJheXMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2xpbmtzO1xufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLmxpbmtBcnJheSA9IGZ1bmN0aW9uKGtleSkge1xuICByZXR1cm4gcHJvcGVydHlBcnJheSh0aGlzLl9saW5rcywga2V5KTtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24oa2V5LCBpbmRleCkge1xuICByZXR1cm4gZWxlbWVudE9mUHJvcGVydHlBcnJheSh0aGlzLl9saW5rcywga2V5LCBpbmRleCk7XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuaGFzQ3VyaWVzID0gZnVuY3Rpb24oa2V5KSB7XG4gIHJldHVybiB0aGlzLl9jdXJpZXMubGVuZ3RoID4gMDtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5jdXJpZUFycmF5ID0gZnVuY3Rpb24oa2V5KSB7XG4gIHJldHVybiB0aGlzLl9jdXJpZXM7XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuY3VyaWUgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHJldHVybiB0aGlzLl9jdXJpZXNNYXBbbmFtZV07XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUucmV2ZXJzZVJlc29sdmVDdXJpZSA9IGZ1bmN0aW9uKGZ1bGxVcmwpIHtcbiAgcmV0dXJuIHRoaXMuX3Jlc29sdmVkQ3VyaWVzTWFwW2Z1bGxVcmxdO1xufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLmFsbEVtYmVkZGVkUmVzb3VyY2VBcnJheXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9lbWJlZGRlZDtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5lbWJlZGRlZFJlc291cmNlQXJyYXkgPSBmdW5jdGlvbihrZXkpIHtcbiAgcmV0dXJuIHByb3BlcnR5QXJyYXkodGhpcy5fZW1iZWRkZWQsIGtleSk7XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuZW1iZWRkZWRSZXNvdXJjZSA9IGZ1bmN0aW9uKGtleSwgaW5kZXgpIHtcbiAgcmV0dXJuIGVsZW1lbnRPZlByb3BlcnR5QXJyYXkodGhpcy5fZW1iZWRkZWQsIGtleSwgaW5kZXgpO1xufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLm9yaWdpbmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9vcmlnaW5hbDtcbn07XG5cbmZ1bmN0aW9uIHByb3BlcnR5QXJyYXkob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsID8gb2JqZWN0W2tleV0gOiBudWxsO1xufVxuXG5mdW5jdGlvbiBlbGVtZW50T2ZQcm9wZXJ0eUFycmF5KG9iamVjdCwga2V5LCBpbmRleCkge1xuICBpbmRleCA9IGluZGV4IHx8IDA7XG4gIHZhciBhcnJheSA9IHByb3BlcnR5QXJyYXkob2JqZWN0LCBrZXkpO1xuICBpZiAoYXJyYXkgIT0gbnVsbCAmJiBhcnJheS5sZW5ndGggPj0gMSkge1xuICAgIHJldHVybiBhcnJheVtpbmRleF07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblJlc291cmNlLnByb3RvdHlwZS52YWxpZGF0aW9uSXNzdWVzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl92YWxpZGF0aW9uO1xufTtcblxuLy8gYWxpYXMgZGVmaW5pdGlvbnNcblJlc291cmNlLnByb3RvdHlwZS5hbGxMaW5rcyA9IFJlc291cmNlLnByb3RvdHlwZS5hbGxMaW5rQXJyYXlzO1xuUmVzb3VyY2UucHJvdG90eXBlLmFsbEVtYmVkZGVkQXJyYXlzID1cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuYWxsRW1iZWRkZWRSZXNvdXJjZXMgPVxuICAgIFJlc291cmNlLnByb3RvdHlwZS5hbGxFbWJlZGRlZFJlc291cmNlQXJyYXlzO1xuUmVzb3VyY2UucHJvdG90eXBlLmVtYmVkZGVkQXJyYXkgPSBSZXNvdXJjZS5wcm90b3R5cGUuZW1iZWRkZWRSZXNvdXJjZUFycmF5O1xuUmVzb3VyY2UucHJvdG90eXBlLmVtYmVkZGVkID0gUmVzb3VyY2UucHJvdG90eXBlLmVtYmVkZGVkUmVzb3VyY2U7XG5SZXNvdXJjZS5wcm90b3R5cGUudmFsaWRhdGlvbiA9IFJlc291cmNlLnByb3RvdHlwZS52YWxpZGF0aW9uSXNzdWVzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc291cmNlO1xuIiwibW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obil7dmFyIHQ9e30sZT1bXTtuPW58fHRoaXMsbi5vbj1mdW5jdGlvbihlLHIsbCl7cmV0dXJuKHRbZV09dFtlXXx8W10pLnB1c2goW3IsbF0pLG59LG4ub2ZmPWZ1bmN0aW9uKHIsbCl7cnx8KHQ9e30pO2Zvcih2YXIgbz10W3JdfHxlLHU9by5sZW5ndGg9bD9vLmxlbmd0aDowO3UtLTspbD09b1t1XVswXSYmby5zcGxpY2UodSwxKTtyZXR1cm4gbn0sbi5lbWl0PWZ1bmN0aW9uKHIpe2Zvcih2YXIgbCxvPXRbcl18fGUsdT1vLmxlbmd0aD4wP28uc2xpY2UoMCxvLmxlbmd0aCk6byxpPTA7bD11W2krK107KWxbMF0uYXBwbHkobFsxXSxlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtyZXR1cm4gbn19OyIsIm1vZHVsZS5leHBvcnRzPXtcInZcIjo0LFwidFwiOlt7XCJ0XCI6NyxcImVcIjpcImlucHV0XCIsXCJtXCI6W3tcIm5cIjpcInR5cGVcIixcImZcIjpcInRleHRcIixcInRcIjoxM30se1wiblwiOlwiYXV0b2NvbXBsZXRlXCIsXCJmXCI6XCJvZmZcIixcInRcIjoxM30se1wiblwiOlwidmFsdWVcIixcImZcIjpbe1widFwiOjIsXCJyXCI6XCJxdWVyeVwifV0sXCJ0XCI6MTN9LHtcIm5cIjpcImNsYXNzXCIsXCJmXCI6W1widHAtYWNfX2lucHV0IFwiLHtcInRcIjoyLFwiclwiOlwiY2xhc3NcIn1dLFwidFwiOjEzfSx7XCJuXCI6XCJwbGFjZWhvbGRlclwiLFwiZlwiOlt7XCJ0XCI6MixcInJcIjpcInBsYWNlaG9sZGVyXCJ9XSxcInRcIjoxM30se1wiblwiOlwidGFiaW5kZXhcIixcImZcIjpbe1widFwiOjIsXCJyXCI6XCJ0YWJpbmRleFwifV0sXCJ0XCI6MTN9XX1dfSJdfQ=="}